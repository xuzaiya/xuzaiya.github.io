<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux安装软件记录</title>
      <link href="2021/04/18/Linux%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E8%AE%B0%E5%BD%95/"/>
      <url>2021/04/18/Linux%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Jenkin实战三</title>
      <link href="2021/04/18/Jenkin%E5%AE%9E%E6%88%98%E4%B8%89/"/>
      <url>2021/04/18/Jenkin%E5%AE%9E%E6%88%98%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Jenkin-Nginx-Hexo-GitHub-Centos-实现自动部署博客"><a href="#Jenkin-Nginx-Hexo-GitHub-Centos-实现自动部署博客" class="headerlink" title="Jenkin+Nginx+Hexo+GitHub+Centos 实现自动部署博客"></a>Jenkin+Nginx+Hexo+GitHub+Centos 实现自动部署博客</h2><p>此篇博客不讲环境搭建，主要记录我自己在搭建Jenkins自动部署我的博客的过程中，遇到的一些难点问题和一些解决办法，以此来避免下一次遇到相同的问题，提高自己的做事效率。</p><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>首先，应该在Centos系统上搭建好我们的 Jenkins，Nginx，JDK，Git，Tomcat  的环境</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>我们将windows本地的博客，通过 <strong>hexo d</strong> 命令部署到GitHub上，然后通过配置 Jenkins，GitHub收到有更新的代码，会通知Jenkins 来重新构建我们的博客，构建的方式需要我们根据自己的情况，自行配置。</p><h3 id="配置过程记录"><a href="#配置过程记录" class="headerlink" title="配置过程记录"></a>配置过程记录</h3><p>​    <strong>1）</strong>在Jenkins 全局工具配置中 （Global Tool Configuration） 配置我们Centos中JDK和Git的路径</p><p><img src="https://www.hualigs.cn/image/607b9a19667c8.jpg" alt></p><p>​    <strong>2）</strong>在Jenkins中新建一个 Freestyle Project  的项目，然后进行项目配置</p><p>​    <strong>源码管理</strong> 配置如下：</p><p><img src="https://www.hualigs.cn/image/607b9b26d01f8.jpg" alt></p><p>​    <strong>构建出发器</strong>配置 如下：</p><p>我们只需要将 <strong>GitHub hook trigger for GITScm polling</strong> 这一选项勾上就行了，代表Github收到代码更新之后，会自动的触发Jenkins 构建项目</p><p>​    <strong>构建环境</strong> 配置，我们只需要配置 Execute shell 选项，在里面添加我们的构建过程，我的配置如下：</p><p><img src="https://www.hualigs.cn/image/607b9cf642dbe.jpg" alt></p><p>然后，点击应用保存即可。总之就是配置两个地方，全局工具配置Git，然后新建项目，再项目中配置github地址，添加私钥，和构建过程。</p><h3 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h3><p><strong>(1)构建项目报错，显示权限不够：</strong></p><p><img src="https://www.hualigs.cn/image/607b9e01954cf.jpg" alt></p><p>报这个错误的原因是登录Jenkins的用户是一个普通用户，我们需要给这个用户添加权限，添加权限的方式就是找到Manage Jenkins &gt;Configure Global Security&gt;Strategy （全局安全配置中的授权策略）给用户添加权限。如下所示：</p><p><img src="https://www.hualigs.cn/image/607b9ee5d1ca2.jpg" alt></p><p><strong>（2）Nginx报403 Forbidden 禁止访问</strong></p><p> 原因：这是由于我们启动Nginx服务的是root用户，但是对Nginx 中的目录进行写入的是Jenkins中的用户，导致没权限访问。</p><p>解决办法： 进入Nginx目录中，修改Nginx中 html目录的权限</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$ chomd -R 777 ./html</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>至此，整个博客自动部署流程就配置好了，省时省力。以前的做法是先在windows本地编辑好了博客，然后需要去覆盖centos系统中，Nginx目录中HTML目录下的public目录，两个系统来回切换十分麻烦。现在只需要上传到github上就可以实现自动构建项目。</p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
          <category> Jenkins实战 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins实战二</title>
      <link href="2021/04/17/Jenkins%E5%AE%9E%E6%88%98%E4%BA%8C/"/>
      <url>2021/04/17/Jenkins%E5%AE%9E%E6%88%98%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Jenkins实战—-环境搭建"><a href="#Jenkins实战—-环境搭建" class="headerlink" title="Jenkins实战—-环境搭建"></a>Jenkins实战—-环境搭建</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>​    今天帮助一位同学搭建Jenkins持续集成环境，本着助人为乐的和对技术热爱的精神，边学边做，记录自己操作的过程，日后可能也会用到这个工具。</p><h2 id="Jenkins环境搭建"><a href="#Jenkins环境搭建" class="headerlink" title="Jenkins环境搭建"></a>Jenkins环境搭建</h2><p>（1）首先查看是否安装了java的编译环境和git</p><p><img src="https://www.hualigs.cn/image/60794937da807.jpg" alt></p><p>（2）下载jenkins.war 包</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://mirrors.tuna.tsinghua.edu.cn/jenkins/war-stable/2.235.3/jenkins.war</span><br><span class="line">如果你输入这个命令，提示你wget：-bash: wget: command not found</span><br><span class="line">你需要安装wget</span><br><span class="line">执行命令 $ yum -y install wget</span><br></pre></td></tr></table></figure><p><img src="https://www.hualigs.cn/image/60794be724238.jpg" alt></p><p>（3）将jenkins.war 包放到 Tomcat服务器中运行</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方法一： 可以自己下载一个tomcat，然后将jenkins.war包，放进Tomcat中webapps目录中，然后进入bin目录，启动tomcat服务器</span><br><span class="line">（1）<span class="formula">$ wget https://mirror.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-8/v8.5.65/bin/apache-tomcat-8.5.65.tar.gz   //下载的是8.5.65 版本的Tomcat</span></span><br><span class="line"><span class="formula">（2）$</span> cp ./jenkins.war ./apache-tomcat-8.5.65/webapps     //将jenkins.war包放进Tomcat中的webapps目录</span><br><span class="line"> (3) <span class="formula">$ sh startup.sh   或者  $</span> ./startup.sh   // 进入bin目录，运行这个命令</span><br><span class="line">（4）浏览器访问 http://49.234.74.70:8080/jenkins  会进入jenkins 登录首页</span><br></pre></td></tr></table></figure><p><img src="https://www.hualigs.cn/image/60798ae7efd04.jpg" alt></p><p>（4）使用 命令  $ cat /root/.jenkins/secrets/initialAdminPassword  可以查看登录密码</p><p><img src="https://www.hualigs.cn/image/60798b5bf0686.jpg" alt></p><p>（5）首次登录进去的页面如下：</p><p><img src="https://www.hualigs.cn/image/60798bc21905d.jpg" alt></p><p>（6）首次登录之后，我们可以在系统管理里面找到用户管理，创建一个新的用户，然后可以以自己创建的用户登录：</p><p><img src="https://www.hualigs.cn/image/60798dfb4288f.jpg" alt></p><p>（7）系统管理》插件管理》Advance》找到最下面的URL，将https改成http，然后submit提交，重启jenkins，然后再次登录，会提示你安装推荐的插件</p><p><img src="https://www.hualigs.cn/image/60799137f2be6.jpg" alt></p><p>(8) jenkins 将英文切换中文</p><p>安装 安装插件 Locale plugin   和  Localization: Chinese（Simplified）</p><p>一直是英文版本，可以安装 Local 插件，然后在 系统管理》系统设置》Locale 这一项中设置 zh_cn，就可以切换成中文</p><p><img src="https://www.hualigs.cn/image/60799521b126d.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
          <category> Jenkins实战 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins实战一</title>
      <link href="2021/04/16/Jenkins%E5%AE%9E%E6%88%98%E4%B8%80/"/>
      <url>2021/04/16/Jenkins%E5%AE%9E%E6%88%98%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Jenkins实战-—–入门介绍"><a href="#Jenkins实战-—–入门介绍" class="headerlink" title="Jenkins实战 —–入门介绍"></a>Jenkins实战 —–入门介绍</h1><h2 id="什么是Jenkins？"><a href="#什么是Jenkins？" class="headerlink" title="什么是Jenkins？"></a>什么是Jenkins？</h2><p>  Jenkins是一个开源的、提供友好操作界面的持续集成(CI)工具，起源于Hudson（Hudson是商用的），主要用于持续、自动的构建/测试软件项目、监控外部任务的运行（这个比较抽象，暂且写上，不做解释）。Jenkins用<strong>Java</strong>语言编写，可在Tomcat等流行的servlet容器中运行，也可独立运行。通常与版本管理工具(SCM)、构建工具结合使用。常用的版本控制工具有SVN、GIT，构建工具有Maven、Ant、Gradle。</p><h3 id="什么是持续集成？"><a href="#什么是持续集成？" class="headerlink" title="什么是持续集成？"></a>什么是持续集成？</h3><p>持续集成（Continuous integration，简称 CI ）一种软件开发时间。持续集成强调开发人员提交了新代码之后，立刻进行构建、（单元）测试。Jenkins 是一个开源软件项目，旨在提供一个开放易用的软件平台，使持续集成变成可能</p><h3 id="持续集成的意义？"><a href="#持续集成的意义？" class="headerlink" title="持续集成的意义？"></a>持续集成的意义？</h3><p>​    <strong>1)</strong> 持续集成中的任何一个环节都是自动完成的，无需太多的人工干预，有利于减少重复过程以节省时间、费用和工作量；</p><p>​    <strong>2)</strong> 持续集成保障了每个时间点上团队成员提交的代码是能成功集成的。换言之，任何时间点都能第一时间发现软件的集成问题，使任意时间发布可部署的软件成为了可能；</p><p>​    <strong>3）</strong>持续集成还能利于软件本身的发展趋势，这点在需求不明确或是频繁性变更的情景中尤其重要，持续集成的质量能帮助团队进行有效决策，同时建立团队对开发产品的信心。</p><h2 id="Jenkins能干嘛？有什么功能？"><a href="#Jenkins能干嘛？有什么功能？" class="headerlink" title="Jenkins能干嘛？有什么功能？"></a>Jenkins能干嘛？有什么功能？</h2><ul><li>持续的软件版本发布/测试项目</li><li>监控外部调用执行的工作</li></ul><h2 id="Jenkins的启动方式"><a href="#Jenkins的启动方式" class="headerlink" title="Jenkins的启动方式"></a>Jenkins的启动方式</h2><ul><li>第一种启动方法，切换到jenkins.war存放的目录，输入如下命令：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ java -jar jenkins.war</span><br><span class="line">如果需要修改端口可以使用如下命令：</span><br><span class="line">$ java -jar jenkins.jar--httpPort=8081</span><br></pre></td></tr></table></figure><ul><li>第二种方法是用<a href="https://baike.baidu.com/item/tomcat/255751" target="_blank" rel="noopener">tomcat</a>打开</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">解压tomcat到某个目录,如/usr/local，进入tomcat下的/bin目录，启动tomcat</span><br><span class="line">将jenkins.war文件放入tomcat下的webapps目录下，启动tomcat时，会自动在webapps目录下建立jenkins目录，在地址栏上需要输入localhost:8080/jenkins。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
          <category> Jenkins实战 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot的java配置</title>
      <link href="2021/04/15/SpringBoot%E7%9A%84java%E9%85%8D%E7%BD%AE/"/>
      <url>2021/04/15/SpringBoot%E7%9A%84java%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="深入解读java配置类"><a href="#深入解读java配置类" class="headerlink" title="深入解读java配置类"></a>深入解读java配置类</h2><h2 id="1、java配置类"><a href="#1、java配置类" class="headerlink" title="1、java配置类"></a>1、java配置类</h2><p>使用到的注解：</p><p>1.@Configuration：声明一个类作为配置类，代替xml文件<br>2.@Bean：声明在方法上，将方法的返回值加入Bean容器，代替标签<br>3.@Value：属性注入（把配置文件的值注入对应的属性）<br>4.@PropertySource：指定外部属性文件</p><p>首先我们引入Druid连接池依赖：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.5&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>在类路径，也就是resources目录下创建一个jdbc.properties文件,并配置一下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://127.0.0.1:3306/leyou</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=yx1994</span><br></pre></td></tr></table></figure><p>然后，创建一个配置类，并使用@Configuration和@PropertySource注解：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//声明一个类是一个java配置类，相当于一个xml配置文件</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:jdbc.properties"</span>)  <span class="comment">//读取资源文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.driverClassName&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String driverClassName;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.url&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.username&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.password&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>  <span class="comment">//把方法的返回值注入到spring容器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DruidDataSource druidSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        druidSource.setDriverClassName(driverClassName);</span><br><span class="line">        druidSource.setUrl(url);</span><br><span class="line">        druidSource.setUsername(username);</span><br><span class="line">        druidSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> druidSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>解读：</p><ul><li>@Configuration：声明我们JdbcConfig是一个配置类</li><li>@PropertySource：指定属性文件的路径是:classpath:jdbc.properties</li><li>通过@Value为属性注入值</li><li>通过@Bean将 dataSource()方法声明为一个注册Bean的方法，Spring会自动调用该方法，将方法的返回值加入Spring容器中。</li></ul><h3 id="2、读取全局配置文件，来注入属性"><a href="#2、读取全局配置文件，来注入属性" class="headerlink" title="2、读取全局配置文件，来注入属性"></a>2、读取全局配置文件，来注入属性</h3><p>使用到的注解：</p><p>1、@ConfigurationProperties</p><p>2、@EnableConfigurationProperties</p><p>首先，需要在application.properties配置文件中，配置我们的数据库的属性配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://127.0.0.1:3306/leyou</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=yx1994</span><br></pre></td></tr></table></figure><p>然后，我们需要编写一个JdbcProperties 资源文件类,给属性提供get和set方法，并使用@ConfigurationProperties注解指明前缀：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"jdbc"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String driverClassName;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDriverClassName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> driverClassName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDriverClassName</span><span class="params">(String driverClassName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.driverClassName = driverClassName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUrl</span><span class="params">(String url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后，在我们的配置类上，使用@EnableConfigurationProperties注解，并指明读取那个全局配置类，并将全局配置类注入到jdbcConfiguration类上：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//声明一个类是一个java配置类，相当于一个xml配置文件</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(JdbcProperties.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcProperties jdbcProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>  <span class="comment">//把方法的返回值注入到spring容器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DruidDataSource druidSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        druidSource.setDriverClassName(jdbcProperties.getDriverClassName());</span><br><span class="line">        druidSource.setUrl(jdbcProperties.getUrl());</span><br><span class="line">        druidSource.setUsername(jdbcProperties.getUsername());</span><br><span class="line">        druidSource.setPassword(jdbcProperties.getPassword());</span><br><span class="line">        <span class="keyword">return</span> druidSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、构造方法属性注入"><a href="#3、构造方法属性注入" class="headerlink" title="3、构造方法属性注入"></a>3、构造方法属性注入</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> JdbcProperties jdbcProperties;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//构造方法属性注入</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">JdbcConfiguration</span><span class="params">(JdbcProperties jdbcProperties)</span></span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.jdbcProperties = jdbcProperties;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="4、方法形参属性注入"><a href="#4、方法形参属性注入" class="headerlink" title="4、方法形参属性注入"></a>4、方法形参属性注入</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span>  <span class="comment">//把方法的返回值注入到spring容器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">(JdbcProperties jdbcProperties)</span></span>&#123;</span><br><span class="line">    DruidDataSource druidSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    druidSource.setDriverClassName(jdbcProperties.getDriverClassName());</span><br><span class="line">    druidSource.setUrl(jdbcProperties.getUrl());</span><br><span class="line">    druidSource.setUsername(jdbcProperties.getUsername());</span><br><span class="line">    druidSource.setPassword(jdbcProperties.getPassword());</span><br><span class="line">    <span class="keyword">return</span> druidSource;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、最优雅的属性注入"><a href="#5、最优雅的属性注入" class="headerlink" title="5、最优雅的属性注入"></a>5、最优雅的属性注入</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span>  <span class="comment">//把方法的返回值注入到spring容器</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"jdbc"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">    DruidDataSource druidSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    <span class="keyword">return</span> druidSource;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>springboot的四种属性注入：</p><ol><li>@Autowired注入</li><li>构造方法注入</li><li>@Bean方法形参注入</li><li>直接在@Bean方法上使用@ConfigurationProperties（prefix=”jdbc”）</li></ol><p>平时用的最多的是第一种@Autowired方法</p>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
          <category> java配置类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+next主题美化二</title>
      <link href="2021/04/12/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%BA%8C/"/>
      <url>2021/04/12/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Hexo-Next主题-优化博客"><a href="#Hexo-Next主题-优化博客" class="headerlink" title="Hexo+Next主题 优化博客"></a>Hexo+Next主题 优化博客</h2><h3 id="1、配置Next主题"><a href="#1、配置Next主题" class="headerlink" title="1、配置Next主题"></a>1、配置Next主题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1) 首先，下载next主题</span><br><span class="line">git clone https://github.com/theme-next/hexo-theme-next themes/next</span><br><span class="line">（2）修改站点配置文件_config.yml，把主题改成next主题</span><br><span class="line">    ## Themes: https://hexo.io/themes/</span><br><span class="line">    theme: next</span><br><span class="line">(3) 修改语言配置，（站点配置文件_config.yml）</span><br><span class="line">language: zh-Hans</span><br></pre></td></tr></table></figure><h3 id="2、在主题配置文件中，修改主题"><a href="#2、在主题配置文件中，修改主题" class="headerlink" title="2、在主题配置文件中，修改主题"></a>2、在主题配置文件中，修改主题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">修改next文件夹下的_config.yml文件</span><br><span class="line"># 主题中的主题</span><br><span class="line"># scheme: Muse</span><br><span class="line">scheme: Mist</span><br><span class="line"># scheme: Pisces</span><br><span class="line"># scheme: Gemini</span><br></pre></td></tr></table></figure><h3 id="3、菜单设置"><a href="#3、菜单设置" class="headerlink" title="3、菜单设置"></a>3、菜单设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home  #首页</span><br><span class="line">  about: /about/ || fa fa-user  #关于  </span><br><span class="line">  tags: /tags/ || fa fa-tags    #标签</span><br><span class="line">  categories: /categories/ || fa fa-th  # 分类</span><br><span class="line">  archives: /archives/ || fa fa-archive # 归档</span><br><span class="line">  schedule: /schedule/ || fa fa-calendar #日程表</span><br><span class="line">  sitemap: /sitemap.xml || fa fa-sitemap # 站点地图</span><br><span class="line">  #commonweal: /404/ || fa fa-heartbeat</span><br></pre></td></tr></table></figure><p>​    效果图：</p><p>​    <img src="https://www.hualigs.cn/image/6072bce705422.jpg" alt></p><h3 id="4、图片懒加载"><a href="#4、图片懒加载" class="headerlink" title="4、图片懒加载"></a>4、图片懒加载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在主题配置文件中修改：</span><br><span class="line">lazyload: true</span><br></pre></td></tr></table></figure><h3 id="5、点击出现桃心效果"><a href="#5、点击出现桃心效果" class="headerlink" title="5、点击出现桃心效果"></a>5、点击出现桃心效果</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(1)在主题/source/js/下新建文件 clicklove.js，添加内容如下</span><br><span class="line">    !function(e,t,a)&#123;function n()&#123;c(&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &apos;&apos;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;),o(),r()&#125;function r()&#123;for(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=&quot;left:&quot;+d[e].x+&quot;px;top:&quot;+d[e].y+&quot;px;opacity:&quot;+d[e].alpha+&quot;;transform:scale(&quot;+d[e].scale+&quot;,&quot;+d[e].scale+&quot;) rotate(45deg);background:&quot;+d[e].color+&quot;;z-index:99999&quot;);requestAnimationFrame(r)&#125;function o()&#123;var t=&quot;function&quot;==typeof e.onclick&amp;&amp;e.onclick;e.onclick=function(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;function i(e)&#123;var a=t.createElement(&quot;div&quot;);a.className=&quot;heart&quot;,d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;function c(e)&#123;var a=t.createElement(&quot;style&quot;);a.type=&quot;text/css&quot;;try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(&quot;head&quot;)[0].appendChild(a)&#125;function s()&#123;return&quot;rgb(&quot;+~~(255*Math.random())+&quot;,&quot;+~~(255*Math.random())+&quot;,&quot;+~~(255*Math.random())+&quot;)&quot;&#125;var d=[];e.requestAnimationFrame=function()&#123;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document);</span><br><span class="line"></span><br><span class="line">(2)修改_layout.swig  添加一下内容</span><br><span class="line">    &lt;!-- 页面点击小红心 --&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;/js/clicklove.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="6、在文章末尾添加“文章结束”标记"><a href="#6、在文章末尾添加“文章结束”标记" class="headerlink" title="6、在文章末尾添加“文章结束”标记"></a>6、在文章末尾添加“文章结束”标记</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  (1)第一步：在主题/layout/_macro 下新建 passage-end-tag.swig 文件，并添加以下代码:</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;% if not is_index %&#125; <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color:#bfbfbf;font-size:16px;"</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>-------- 本文结束 <span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-paw"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span> 感谢阅读 --------<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span> &#123;% endif %&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">（2）打开文件，路径：themes\next\layout\_macro\post.swig，在post-body之后，post-footer之前（如果找不到位置的按照我下图的位置添加）添加以下代码：</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;% if not is_index %&#125; &#123;% include 'passage-end-tag.swig' %&#125; &#123;% endif %&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">（3）打开主题配置文件，在最后位置添加以下代码：</span><br><span class="line">post_end_tag:enabled: true # 是否开启文末的本文结束标记</span><br></pre></td></tr></table></figure><h3 id="7、修改主题页面布局为圆角"><a href="#7、修改主题页面布局为圆角" class="headerlink" title="7、修改主题页面布局为圆角"></a>7、修改主题页面布局为圆角</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">打开文件，路径：\themes\next\source\css\_variables\Gemini.styl ，添加以下代码：</span><br><span class="line"></span><br><span class="line">// 修改主题页面布局为圆角</span><br><span class="line">$border-radius-inner = 15px 15px 15px 15px;</span><br><span class="line">$border-radius = 15px;</span><br></pre></td></tr></table></figure><h3 id="8、配置站内搜索"><a href="#8、配置站内搜索" class="headerlink" title="8、配置站内搜索"></a>8、配置站内搜索</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">(1)首先安装插件，输入以下两个命令：</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-search</span> <span class="bullet">--save</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-searchdb</span> <span class="bullet">--save</span></span><br><span class="line"><span class="string">(2)在站点配置里末尾增加以下代码：</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line"><span class="attr">path:</span> <span class="string">search.xml</span> </span><br><span class="line"><span class="attr">field:</span> <span class="string">post</span> </span><br><span class="line"><span class="attr">format:</span> <span class="string">html</span> </span><br><span class="line"><span class="attr">limit:</span> <span class="number">10000</span></span><br><span class="line"><span class="string">(3)在主题配置文件里搜索找到local_search修改为如下</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="9、设置分页"><a href="#9、设置分页" class="headerlink" title="9、设置分页"></a>9、设置分页</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装相应的插件</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="bullet">--save</span> <span class="string">hexo-generator-index</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="bullet">--save</span> <span class="string">hexo-generator-archive</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改站点的配置文件</span></span><br><span class="line"><span class="string">cd</span> <span class="string">博客目录</span></span><br><span class="line"><span class="string">vim</span> <span class="string">_config.yml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这一段默认就有的</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">  order_by:</span> <span class="bullet">-date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 归档页面</span></span><br><span class="line"><span class="attr">archive_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">50</span></span><br><span class="line"><span class="attr">  yearly:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  monthly:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="10、阅读全文设置"><a href="#10、阅读全文设置" class="headerlink" title="10、阅读全文设置"></a>10、阅读全文设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(1)使用npm安装hexo-excerpt</span><br><span class="line">npm install hexo-excerpt --save</span><br><span class="line">(2)在站点配置文件中添加</span><br><span class="line">excerpt:</span><br><span class="line">      depth: 3</span><br><span class="line">      excerpt_excludes: []</span><br><span class="line">      more_excludes: []</span><br><span class="line">      hideWholePostExcerpts: true</span><br></pre></td></tr></table></figure><h3 id="11、添加APlayer音乐播放器"><a href="#11、添加APlayer音乐播放器" class="headerlink" title="11、添加APlayer音乐播放器"></a>11、添加APlayer音乐播放器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">1、先下载Aplayer源码：APlayer：https://codechina.csdn.net/mirrors/moeplayer/aplayer?utm_source=csdn_github_accelerator</span><br><span class="line">2、在目录blog/themes/next/source/dist下添加music.js文件，添加音乐，示例格式如下：</span><br><span class="line"></span><br><span class="line">const ap = new APlayer(&#123;</span><br><span class="line">    container: document.getElementById(&apos;aplayer&apos;),</span><br><span class="line">    fixed: true,</span><br><span class="line">    autoplay: true,</span><br><span class="line">    audio: [</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;Film out&apos;,</span><br><span class="line">        artist: &apos;BTS&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1834176131.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/5.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;Boy With Luv&quot;,</span><br><span class="line">        artist: &apos;BTS&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1375569365.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/xingxing.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: &apos;这就是爱吗&apos;,</span><br><span class="line">        artist: &apos;十豆&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1412242872.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/zjsam.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: &apos;Alone&apos;,</span><br><span class="line">        artist: &apos;Alan Walker / Noonie Bao&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=444269135.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/alone.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;Umbrella (Matte Remix)&apos;,</span><br><span class="line">        artist: &apos;Matte / Ember Island&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=164209623.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/1.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;大眠 (完整版)原唱：王心凌&apos;,</span><br><span class="line">        artist: &apos;小乐哥&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=3778678.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/2.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;世间美好与你环环相扣&apos;,</span><br><span class="line">        artist: &apos;柏松&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1363948882.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/3.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;飞&apos;,</span><br><span class="line">        artist: &apos;王恩信Est / 二胖u&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1386259535.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/4.jpg&apos;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="12、文章末尾添加版权说明"><a href="#12、文章末尾添加版权说明" class="headerlink" title="12、文章末尾添加版权说明"></a>12、文章末尾添加版权说明</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">找到主题配置文件，将creative_commons这一项中的</span> <span class="string">post配置改为true，如下配置：</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line"><span class="attr">  license:</span> <span class="string">by-nc-sa</span></span><br><span class="line"><span class="attr">  sidebar:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  post:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  language:</span></span><br></pre></td></tr></table></figure><h3 id="13、添加阅读访问次数"><a href="#13、添加阅读访问次数" class="headerlink" title="13、添加阅读访问次数"></a>13、添加阅读访问次数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">找到主题配置文件中的  busuanzi_count 开启即可</span><br><span class="line">busuanzi_count:</span><br><span class="line">  enable: true</span><br><span class="line">  total_visitors: true</span><br><span class="line">  total_visitors_icon: fa fa-user</span><br><span class="line">  total_views: true</span><br><span class="line">  total_views_icon: fa fa-eye</span><br><span class="line">  post_views: true</span><br><span class="line">  post_views_icon: fa fa-eye</span><br></pre></td></tr></table></figure><h3 id="14、添加评论功能"><a href="#14、添加评论功能" class="headerlink" title="14、添加评论功能"></a>14、添加评论功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">找到主题配置文件，valine 开启就行，然后配置好自己的leancloud 中的appid 和appkey</span><br><span class="line">valine:</span><br><span class="line">  enable: true</span><br><span class="line">  appid: --- # Your leancloud application appid</span><br><span class="line">  appkey: --- # Your leancloud application appkey</span><br><span class="line">  notify: false # Mail notifier</span><br><span class="line">  verify: false # Verification code</span><br><span class="line">  placeholder: Just go go # Comment box placeholder</span><br><span class="line">  avatar: mm # Gravatar style</span><br><span class="line">  guest_info: nick,mail,link # Custom comment header</span><br><span class="line">  pageSize: 10 # Pagination size</span><br><span class="line">  language: # Language, available values: en, zh-cn</span><br><span class="line">  visitor: false # Article reading statistic</span><br><span class="line">  comment_count: true # If false, comment count will only be displayed in post page, not in home page</span><br><span class="line">  recordIP: false # Whether to record the commenter IP</span><br><span class="line">  serverURLs: # When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span><br><span class="line">  #post_meta_order: 0</span><br></pre></td></tr></table></figure><h3 id="15、添加-博文压缩"><a href="#15、添加-博文压缩" class="headerlink" title="15、添加 博文压缩"></a>15、添加 博文压缩</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">（1）首先安装包</span><br><span class="line">$ npm install gulp -g</span><br><span class="line">$ npm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp --save</span><br><span class="line">（2）在站点目录下新建gulpfile.js 在文章填写一下代码：</span><br><span class="line">var gulp = require(&apos;gulp&apos;);</span><br><span class="line">    var minifycss = require(&apos;gulp-minify-css&apos;);</span><br><span class="line">    var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class="line">    var htmlmin = require(&apos;gulp-htmlmin&apos;);</span><br><span class="line">    var htmlclean = require(&apos;gulp-htmlclean&apos;);</span><br><span class="line">    // 压缩 public 目录 css</span><br><span class="line">    gulp.task(&apos;minify-css&apos;, function() &#123;</span><br><span class="line">        return gulp.src(&apos;./public/**/*.css&apos;)</span><br><span class="line">            .pipe(minifycss())</span><br><span class="line">            .pipe(gulp.dest(&apos;./public&apos;));</span><br><span class="line">    &#125;);</span><br><span class="line">    // 压缩 public 目录 html</span><br><span class="line">    gulp.task(&apos;minify-html&apos;, function() &#123;</span><br><span class="line">      return gulp.src(&apos;./public/**/*.html&apos;)</span><br><span class="line">        .pipe(htmlclean())</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br><span class="line">             removeComments: true,</span><br><span class="line">             minifyJS: true,</span><br><span class="line">             minifyCSS: true,</span><br><span class="line">             minifyURLs: true,</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&apos;./public&apos;))</span><br><span class="line">    &#125;);</span><br><span class="line">    // 压缩 public/js 目录 js</span><br><span class="line">    gulp.task(&apos;minify-js&apos;, function() &#123;</span><br><span class="line">        return gulp.src(&apos;./public/**/*.js&apos;)</span><br><span class="line">            .pipe(uglify())</span><br><span class="line">            .pipe(gulp.dest(&apos;./public&apos;));</span><br><span class="line">    &#125;);</span><br><span class="line">    // 执行 gulp 命令时执行的任务</span><br><span class="line">    gulp.task(&apos;default&apos;, [</span><br><span class="line">        &apos;minify-html&apos;,&apos;minify-css&apos;,&apos;minify-js&apos;</span><br><span class="line">    ]);</span><br><span class="line">  （3）生成博文是执行 hexo g &amp;&amp; gulp 就会根据 gulpfile.js 中的配置，对 public 目录中的静态资源文件进行压缩。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> Next主题美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+next主题美化一</title>
      <link href="2021/04/12/hexo-next%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
      <url>2021/04/12/hexo-next%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Hexo-Next主题-优化博客"><a href="#Hexo-Next主题-优化博客" class="headerlink" title="Hexo+Next主题 优化博客"></a>Hexo+Next主题 优化博客</h2><h3 id="1、配置Next主题"><a href="#1、配置Next主题" class="headerlink" title="1、配置Next主题"></a>1、配置Next主题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1) 首先，下载next主题</span><br><span class="line">git clone https://github.com/theme-next/hexo-theme-next themes/next</span><br><span class="line">（2）修改站点配置文件_config.yml，把主题改成next主题</span><br><span class="line">    ## Themes: https://hexo.io/themes/</span><br><span class="line">    theme: next</span><br><span class="line">(3) 修改语言配置，（站点配置文件_config.yml）</span><br><span class="line">language: zh-Hans</span><br></pre></td></tr></table></figure><h3 id="2、在主题配置文件中，修改主题"><a href="#2、在主题配置文件中，修改主题" class="headerlink" title="2、在主题配置文件中，修改主题"></a>2、在主题配置文件中，修改主题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">修改next文件夹下的_config.yml文件</span><br><span class="line"># 主题中的主题</span><br><span class="line"># scheme: Muse</span><br><span class="line">scheme: Mist</span><br><span class="line"># scheme: Pisces</span><br><span class="line"># scheme: Gemini</span><br></pre></td></tr></table></figure><h3 id="3、菜单设置"><a href="#3、菜单设置" class="headerlink" title="3、菜单设置"></a>3、菜单设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home  #首页</span><br><span class="line">  about: /about/ || fa fa-user  #关于  </span><br><span class="line">  tags: /tags/ || fa fa-tags    #标签</span><br><span class="line">  categories: /categories/ || fa fa-th  # 分类</span><br><span class="line">  archives: /archives/ || fa fa-archive # 归档</span><br><span class="line">  schedule: /schedule/ || fa fa-calendar #日程表</span><br><span class="line">  sitemap: /sitemap.xml || fa fa-sitemap # 站点地图</span><br><span class="line">  #commonweal: /404/ || fa fa-heartbeat</span><br></pre></td></tr></table></figure><p>​    效果图：</p><p>​    <img src="https://www.hualigs.cn/image/6072bce705422.jpg" alt></p><h3 id="4、图片懒加载"><a href="#4、图片懒加载" class="headerlink" title="4、图片懒加载"></a>4、图片懒加载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在主题配置文件中修改：</span><br><span class="line">lazyload: true</span><br></pre></td></tr></table></figure><h3 id="5、点击出现桃心效果"><a href="#5、点击出现桃心效果" class="headerlink" title="5、点击出现桃心效果"></a>5、点击出现桃心效果</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(1)在主题/source/js/下新建文件 clicklove.js，添加内容如下</span><br><span class="line">    !function(e,t,a)&#123;function n()&#123;c(&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &apos;&apos;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;),o(),r()&#125;function r()&#123;for(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=&quot;left:&quot;+d[e].x+&quot;px;top:&quot;+d[e].y+&quot;px;opacity:&quot;+d[e].alpha+&quot;;transform:scale(&quot;+d[e].scale+&quot;,&quot;+d[e].scale+&quot;) rotate(45deg);background:&quot;+d[e].color+&quot;;z-index:99999&quot;);requestAnimationFrame(r)&#125;function o()&#123;var t=&quot;function&quot;==typeof e.onclick&amp;&amp;e.onclick;e.onclick=function(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;function i(e)&#123;var a=t.createElement(&quot;div&quot;);a.className=&quot;heart&quot;,d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;function c(e)&#123;var a=t.createElement(&quot;style&quot;);a.type=&quot;text/css&quot;;try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(&quot;head&quot;)[0].appendChild(a)&#125;function s()&#123;return&quot;rgb(&quot;+~~(255*Math.random())+&quot;,&quot;+~~(255*Math.random())+&quot;,&quot;+~~(255*Math.random())+&quot;)&quot;&#125;var d=[];e.requestAnimationFrame=function()&#123;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document);</span><br><span class="line"></span><br><span class="line">(2)修改_layout.swig  添加一下内容</span><br><span class="line">    &lt;!-- 页面点击小红心 --&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;/js/clicklove.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="6、在文章末尾添加“文章结束”标记"><a href="#6、在文章末尾添加“文章结束”标记" class="headerlink" title="6、在文章末尾添加“文章结束”标记"></a>6、在文章末尾添加“文章结束”标记</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  (1)第一步：在主题/layout/_macro 下新建 passage-end-tag.swig 文件，并添加以下代码:</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;% if not is_index %&#125; <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color:#bfbfbf;font-size:16px;"</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>-------- 本文结束 <span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-paw"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span> 感谢阅读 --------<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span> &#123;% endif %&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">（2）打开文件，路径：themes\next\layout\_macro\post.swig，在post-body之后，post-footer之前（如果找不到位置的按照我下图的位置添加）添加以下代码：</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;% if not is_index %&#125; &#123;% include 'passage-end-tag.swig' %&#125; &#123;% endif %&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">（3）打开主题配置文件，在最后位置添加以下代码：</span><br><span class="line">post_end_tag:enabled: true # 是否开启文末的本文结束标记</span><br></pre></td></tr></table></figure><h3 id="7、修改主题页面布局为圆角"><a href="#7、修改主题页面布局为圆角" class="headerlink" title="7、修改主题页面布局为圆角"></a>7、修改主题页面布局为圆角</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">打开文件，路径：\themes\next\source\css\_variables\Gemini.styl ，添加以下代码：</span><br><span class="line"></span><br><span class="line">// 修改主题页面布局为圆角</span><br><span class="line">$border-radius-inner = 15px 15px 15px 15px;</span><br><span class="line">$border-radius = 15px;</span><br></pre></td></tr></table></figure><h3 id="8、配置站内搜索"><a href="#8、配置站内搜索" class="headerlink" title="8、配置站内搜索"></a>8、配置站内搜索</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">(1)首先安装插件，输入以下两个命令：</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-search</span> <span class="bullet">--save</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-searchdb</span> <span class="bullet">--save</span></span><br><span class="line"><span class="string">(2)在站点配置里末尾增加以下代码：</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line"><span class="attr">path:</span> <span class="string">search.xml</span> </span><br><span class="line"><span class="attr">field:</span> <span class="string">post</span> </span><br><span class="line"><span class="attr">format:</span> <span class="string">html</span> </span><br><span class="line"><span class="attr">limit:</span> <span class="number">10000</span></span><br><span class="line"><span class="string">(3)在主题配置文件里搜索找到local_search修改为如下</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="9、设置分页"><a href="#9、设置分页" class="headerlink" title="9、设置分页"></a>9、设置分页</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装相应的插件</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="bullet">--save</span> <span class="string">hexo-generator-index</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="bullet">--save</span> <span class="string">hexo-generator-archive</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改站点的配置文件</span></span><br><span class="line"><span class="string">cd</span> <span class="string">博客目录</span></span><br><span class="line"><span class="string">vim</span> <span class="string">_config.yml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这一段默认就有的</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">  order_by:</span> <span class="bullet">-date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 归档页面</span></span><br><span class="line"><span class="attr">archive_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">50</span></span><br><span class="line"><span class="attr">  yearly:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  monthly:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="10、阅读全文设置"><a href="#10、阅读全文设置" class="headerlink" title="10、阅读全文设置"></a>10、阅读全文设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(1)使用npm安装hexo-excerpt</span><br><span class="line">npm install hexo-excerpt --save</span><br><span class="line">(2)在站点配置文件中添加</span><br><span class="line">excerpt:</span><br><span class="line">      depth: 3</span><br><span class="line">      excerpt_excludes: []</span><br><span class="line">      more_excludes: []</span><br><span class="line">      hideWholePostExcerpts: true</span><br></pre></td></tr></table></figure><h3 id="11、添加APlayer音乐播放器"><a href="#11、添加APlayer音乐播放器" class="headerlink" title="11、添加APlayer音乐播放器"></a>11、添加APlayer音乐播放器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">1、先下载Aplayer源码：APlayer：https://codechina.csdn.net/mirrors/moeplayer/aplayer?utm_source=csdn_github_accelerator</span><br><span class="line">2、在目录blog/themes/next/source/dist下添加music.js文件，添加音乐，示例格式如下：</span><br><span class="line"></span><br><span class="line">const ap = new APlayer(&#123;</span><br><span class="line">    container: document.getElementById(&apos;aplayer&apos;),</span><br><span class="line">    fixed: true,</span><br><span class="line">    autoplay: true,</span><br><span class="line">    audio: [</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;Film out&apos;,</span><br><span class="line">        artist: &apos;BTS&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1834176131.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/5.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;Boy With Luv&quot;,</span><br><span class="line">        artist: &apos;BTS&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1375569365.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/xingxing.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: &apos;这就是爱吗&apos;,</span><br><span class="line">        artist: &apos;十豆&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1412242872.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/zjsam.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: &apos;Alone&apos;,</span><br><span class="line">        artist: &apos;Alan Walker / Noonie Bao&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=444269135.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/alone.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;Umbrella (Matte Remix)&apos;,</span><br><span class="line">        artist: &apos;Matte / Ember Island&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=164209623.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/1.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;大眠 (完整版)原唱：王心凌&apos;,</span><br><span class="line">        artist: &apos;小乐哥&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=3778678.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/2.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;世间美好与你环环相扣&apos;,</span><br><span class="line">        artist: &apos;柏松&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1363948882.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/3.jpg&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">        name: &apos;飞&apos;,</span><br><span class="line">        artist: &apos;王恩信Est / 二胖u&apos;,</span><br><span class="line">        url: &apos;http://music.163.com/song/media/outer/url?id=1386259535.mp3&apos;,</span><br><span class="line">        cover: &apos;/images/4.jpg&apos;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="12、文章末尾添加版权说明"><a href="#12、文章末尾添加版权说明" class="headerlink" title="12、文章末尾添加版权说明"></a>12、文章末尾添加版权说明</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">找到主题配置文件，将creative_commons这一项中的</span> <span class="string">post配置改为true，如下配置：</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line"><span class="attr">  license:</span> <span class="string">by-nc-sa</span></span><br><span class="line"><span class="attr">  sidebar:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  post:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  language:</span></span><br></pre></td></tr></table></figure><h3 id="13、添加阅读访问次数"><a href="#13、添加阅读访问次数" class="headerlink" title="13、添加阅读访问次数"></a>13、添加阅读访问次数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">找到主题配置文件中的  busuanzi_count 开启即可</span><br><span class="line">busuanzi_count:</span><br><span class="line">  enable: true</span><br><span class="line">  total_visitors: true</span><br><span class="line">  total_visitors_icon: fa fa-user</span><br><span class="line">  total_views: true</span><br><span class="line">  total_views_icon: fa fa-eye</span><br><span class="line">  post_views: true</span><br><span class="line">  post_views_icon: fa fa-eye</span><br></pre></td></tr></table></figure><h3 id="14、添加评论功能"><a href="#14、添加评论功能" class="headerlink" title="14、添加评论功能"></a>14、添加评论功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">找到主题配置文件，valine 开启就行，然后配置好自己的leancloud 中的appid 和appkey</span><br><span class="line">valine:</span><br><span class="line">  enable: true</span><br><span class="line">  appid: --- # Your leancloud application appid</span><br><span class="line">  appkey: --- # Your leancloud application appkey</span><br><span class="line">  notify: false # Mail notifier</span><br><span class="line">  verify: false # Verification code</span><br><span class="line">  placeholder: Just go go # Comment box placeholder</span><br><span class="line">  avatar: mm # Gravatar style</span><br><span class="line">  guest_info: nick,mail,link # Custom comment header</span><br><span class="line">  pageSize: 10 # Pagination size</span><br><span class="line">  language: # Language, available values: en, zh-cn</span><br><span class="line">  visitor: false # Article reading statistic</span><br><span class="line">  comment_count: true # If false, comment count will only be displayed in post page, not in home page</span><br><span class="line">  recordIP: false # Whether to record the commenter IP</span><br><span class="line">  serverURLs: # When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span><br><span class="line">  #post_meta_order: 0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> Next主题美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo常用命令详解</title>
      <link href="2021/04/11/Hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/"/>
      <url>2021/04/11/Hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Hexo常用命令详解"><a href="#Hexo常用命令详解" class="headerlink" title="Hexo常用命令详解"></a>Hexo常用命令详解</h2><h3 id="1、hexo-init"><a href="#1、hexo-init" class="headerlink" title="1、hexo init"></a>1、hexo init</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init 命令用于初始化一个本地文件夹为网站的根目录</span><br></pre></td></tr></table></figure><h3 id="2、hexo-new"><a href="#2、hexo-new" class="headerlink" title="2、hexo new"></a>2、hexo new</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new title 新建一篇文章</span><br></pre></td></tr></table></figure><h3 id="3、hexo-generate"><a href="#3、hexo-generate" class="headerlink" title="3、hexo generate"></a>3、hexo generate</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate 可以简写成 hexo g</span><br><span class="line">该命令用于生成静态文件</span><br></pre></td></tr></table></figure><h3 id="4、hexo-server"><a href="#4、hexo-server" class="headerlink" title="4、hexo server"></a>4、hexo server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server 命令用于启动本地服务器，一般可以简写成 hexo s</span><br><span class="line">可以加一些参数</span><br><span class="line">-p    选项，指定服务器端口，默认为 4000</span><br><span class="line">-i    选项，指定服务器 IP 地址，默认为 0.0.0.0</span><br><span class="line">-s    选项，静态模式 ，仅提供 public 文件夹中的文件并禁用文件监视</span><br></pre></td></tr></table></figure><h3 id="5、hexo-deploy"><a href="#5、hexo-deploy" class="headerlink" title="5、hexo deploy"></a>5、hexo deploy</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy 命令用于部署网站，一般可以简写成 hexo d</span><br></pre></td></tr></table></figure><h3 id="6、hexo-clean"><a href="#6、hexo-clean" class="headerlink" title="6、hexo clean"></a>6、hexo clean</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean 命令用于清理缓存文件，是一个比较常用的命令</span><br></pre></td></tr></table></figure><h3 id="7、hexo-–safe"><a href="#7、hexo-–safe" class="headerlink" title="7、hexo  –safe"></a>7、hexo  –safe</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --safe 表示安全模式，用于禁用加载插件和脚本</span><br></pre></td></tr></table></figure><h3 id="8、hexo-–debug"><a href="#8、hexo-–debug" class="headerlink" title="8、hexo –debug"></a>8、hexo –debug</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --debug 表示调试模式，用于将消息详细记录到终端和 debug.log 文件</span><br></pre></td></tr></table></figure><h3 id="9、hexo-–silent"><a href="#9、hexo-–silent" class="headerlink" title="9、hexo –silent"></a>9、hexo –silent</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo --silent  表示静默模式，用于静默输出到终端</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> hexo常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java发送HTTP请求</title>
      <link href="2020/08/14/java%E5%8F%91%E9%80%81HTTP%E8%AF%B7%E6%B1%82%E7%9A%84%E5%9D%91/"/>
      <url>2020/08/14/java%E5%8F%91%E9%80%81HTTP%E8%AF%B7%E6%B1%82%E7%9A%84%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="java发送HTTP请求的坑"><a href="#java发送HTTP请求的坑" class="headerlink" title="java发送HTTP请求的坑"></a>java发送HTTP请求的坑</h1><h2 id="坑1"><a href="#坑1" class="headerlink" title="坑1"></a>坑1</h2><p>特殊字符编码问题，对于链接中有特殊字符的参数必须进行encode，不然会报400错误<br>比较好的写法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">String param=<span class="string">""</span>;</span><br><span class="line"> StringBuffer sf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"> <span class="keyword">for</span> (HashMap.Entry entry:hashMap.entrySet()</span><br><span class="line">      ) &#123;</span><br><span class="line">     String[] arrStr= <span class="keyword">new</span> String[<span class="number">0</span>];</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         arrStr = <span class="keyword">new</span> String[]&#123;entry.getKey().toString(), </span><br><span class="line">         java.net.URLEncoder.encode(entry.getValue().toString(),<span class="string">"utf-8"</span>)&#125;;</span><br><span class="line">         System.out.println(arrStr.toString());</span><br><span class="line">     &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">         System.out.println(e.getMessage());</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     String paramString = <span class="string">"&amp;"</span>+param.join(<span class="string">"="</span>,arrStr);</span><br><span class="line">     sf.append(paramString);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="坑2"><a href="#坑2" class="headerlink" title="坑2"></a>坑2</h2><p>java中用于编码的包有两个，一个是java.net下的URLencoder，一个是org.sun.xxxx下的URLencoder，两个类下的encode方法参数都一样，我之前开始使用的sun下的包，结果死活不行，还不报错，坑的一批。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> java基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL日记乐观锁和悲观锁</title>
      <link href="2020/08/14/SQL%E6%97%A5%E8%AE%B0%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81/"/>
      <url>2020/08/14/SQL%E6%97%A5%E8%AE%B0%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="序"><a href="#序" class="headerlink" title="序"></a>序</h2><p>本来对理性世界里的代码总是夹杂着崇敬的心，因为它们看起来总是绝对的正确和感性。但自从看到乐观和悲观用于形容SQL中的锁之后，一切都有所变化。它们好像也有喜怒哀乐，也会感性，也会极端，还会不开心。我想看看它们的开心和不开心，看看它们发生了什么事，让绝对理性的事物竟然染上了人类独有的情感。最近看了几本小说，想试着用半比喻的形式对乐观、悲观锁两个概念进行阐述。</p><h2 id="我是锁"><a href="#我是锁" class="headerlink" title="我是锁"></a>我是锁</h2><h3 id="锁的独白"><a href="#锁的独白" class="headerlink" title="锁的独白"></a>锁的独白</h3><p>我是锁，我存在于这个世上已久。人们会用我来保护他们的心头爱，不管是好是坏，我都照单全收，从不拒绝。自从计算机问世，用的人成几何倍数增长，我也以数字化的形式进入到了二进制的世界里。用二进制的形式来保卫二进制。不论以什么样的形式存在，被我保护的东西都会原封不动。至少，不会让和主人同等级别的人有机会趁虚而入对其做手脚。别人想要看到我保护的东西，就必须和主人申请，钥匙也好，申明也罢。我一直就是这样。不过，主人的要求越来越奇怪，我是一个绝对的锁，不允许我的世界里出现模棱两可的东西。我向主人抱怨，希望他不要破坏我的世界观，他总是需求是这样，我也没办法啊。我越想越气。我突然发现，我也有了情绪，变得有点奇怪。</p><h3 id="锁的定义"><a href="#锁的定义" class="headerlink" title="锁的定义"></a>锁的定义</h3><p>锁，又名Lock。人尽皆知，但今天要聊的不是锁门的也不是怎么撬锁。只说说程序员天天交到的数据库里的锁。从锁的字面意思就知道，他是保证安全的，外面的人进不来，里面的人出不去。这里的人其实是数据，锁在数据库只做一件事，<strong>保证数据的一致性</strong>。也就是，哪怕千军万马都急着用锁保护的东西，那么，也要有个先来后到，一个一个来。这样保证了数据在任意时刻只会右一个线程进行操作，从而不会导致数据读取和写入的不准确。</p><h2 id="乐观和悲观"><a href="#乐观和悲观" class="headerlink" title="乐观和悲观"></a>乐观和悲观</h2><h3 id="感性的锁"><a href="#感性的锁" class="headerlink" title="感性的锁"></a>感性的锁</h3><p>主人在不停的灌输给我，作为一个锁，除了黑白两面之外，也应该带点灰。就像主人写的代码，有人会说好，有人会说辣鸡，也会有人说还行。这也让我有了一点感觉。就算在二进制的世界里，你碰见的都是0和1，但也有轻重缓急之分。有的0不急，说你慢慢来，只要安全就可以了。也有的1很着急，说搞快点，慢了下次就没我的饭吃了。如果我都用同一个自己去面对所有的0和1，那么我一定活不到下一次版本更新。于是，我瞧瞧做了两个我的分身，他们和我都拥有同样的管控权利，只是按照0和1还有代码的需求，他们有了自己的性格，或者说我用人类的情绪强化了他们，让他们用人类的情绪和思维方式来控制我们保护的数据。</p><h3 id="为什么要悲观和乐观"><a href="#为什么要悲观和乐观" class="headerlink" title="为什么要悲观和乐观"></a>为什么要悲观和乐观</h3><p>应用的场景不同，需要的人性格也有所不同，需要励志和激情的时候，你要是找个闷灌，可能你就完蛋了。程序也是如此，如果程序等着对数据进行访问(读操作多),而进行更新操作的情况较少，那么，我们不必把锁的管控做的过于严苛，让锁和乐观的人一样自信且坚定的相信所见即真实。简言之，<strong>读多写少，这是乐观锁的工作场景</strong>。这样做，则能够保证所有程序可以在同一时刻都读取数据，而更新数据时，<strong>仅根据数据版本、更新时间来对数据的实时性进行验证，并不会对同时有几个人在进行写操作进行限制</strong>。这里需要提一下<strong>乐观锁的实现方式，一般采用CAS(Compare and Swap)来实现，对于内存中的某一个值V，提供一个旧值A和一个新值B。如果提供的旧值V和A相等就把B写入V，这个过程是原子性的。</strong></p><p>如果你遇到了一些严谨的工作，那么，找一个理性且带有悲观主义色彩的人来做，会更靠谱一些。因为很多时候，他们更倾向于相信事件会朝着坏的方向发展。程序在一些注重数据准确性而非效率的场景出现时，使用悲观锁是有必要的。虽然，他们每次都会保证数据在被一个线程写，但这也会拖慢整个程序的效率。<strong>写多读少，是悲观锁的工作场景</strong>。</p><h2 id="乐观锁和悲观锁家族"><a href="#乐观锁和悲观锁家族" class="headerlink" title="乐观锁和悲观锁家族"></a>乐观锁和悲观锁家族</h2><h3 id="乐观锁和悲观锁的对话"><a href="#乐观锁和悲观锁的对话" class="headerlink" title="乐观锁和悲观锁的对话"></a>乐观锁和悲观锁的对话</h3><p>乐观锁:”现在的数据人们都懂得怎么使用和安排了，想开点老兄，管理好你现在的数据就好，不要太干涉0和1自身的操作了。”</p><p>悲观锁:”你说的轻松。如果出现了忒休斯之船的问题，你怎么办。所以说，保险起见，还是要对这些数据的操作进行严格的把关，想要操作数据，就必须一个一个来！”</p><p>于是，悲观锁像锁一样，创造了排它锁和共享锁，帮他分担严格管控数据的工作。</p><p>顾名思义，排它锁成了仓库的老大，严格按照先来后到，让数据保证每次只接触到一个指令。</p><p>而共享锁稍微温柔一些，他还是允许大家一起访问，但是，在写数据时，严格遵守先来后到的规矩。</p><h3 id="排他锁和共享锁"><a href="#排他锁和共享锁" class="headerlink" title="排他锁和共享锁"></a>排他锁和共享锁</h3><p>排它锁使用时，按照线程上锁的顺序，对资源进行管控，如果一个线程为资源上了排它锁，那么，其他的线程<strong>既不能读取数据也不能写入数据，同时其他线程无法再为该资源添加其他锁</strong>，直到线程使用结束。</p><p>共享锁使用时，则<strong>可以同时读取数据，但只能单个线程写入数据，允许其他线程为该资源加共享锁，但不能加排它锁</strong>。</p><h2 id="转折"><a href="#转折" class="headerlink" title="转折"></a>转折</h2><h3 id="意外的死锁"><a href="#意外的死锁" class="headerlink" title="意外的死锁"></a>意外的死锁</h3><p>打起来了，打起来了。0和1们纷纷到仓库看热闹，只见两把锁纠缠在一起，0和1们需要访问的数据都被各自保护，各自无法进入想要访问的数据里去。这是锁出来，对没错就是开头的那把锁，在计算机世界里，他算是所有锁的神。</p><p>他问：”你们为何要为难各自的访问者？”</p><p>两把扭打着的锁说着:”他们的人要抢我保护的数据！”</p><p>锁沉默了，思索片刻。他问：”是不是你们两个各自保护的东西，在各自主人还未使用完之后，又强行被各自的主人霸占了，而主人又想用对方的东西？”</p><p>他们一口同声的说：”对！”</p><p>于是，锁笑了笑，把他们拆开，结束了这次的操作。</p><h3 id="为什么是死锁"><a href="#为什么是死锁" class="headerlink" title="为什么是死锁"></a>为什么是死锁</h3><p>死锁的原理其实很简单，两把锁各自保护的东西在两个线程操作时，发生了重叠。可以理解为，A线程在使用A资源，同时又准备使用B资源，而B线程正在使用B资源，同时准备使用A资源。那么，彼此线程都不能得到满足，因为A和B资源都被占用了，那么A和B线程就没办法正常结束，所以，所有线程都没有办法正常的对资源进行使用。</p><h3 id="怎么解决"><a href="#怎么解决" class="headerlink" title="怎么解决"></a>怎么解决</h3><p>解决死锁最简单的方法就是：<strong>不要贪心</strong>，在一个线程或者一个事务里不要想着占用所有的资源，不要把所有耗时的操作都放在一个线程或事务里处理并且使用的资源又都是被高频使用的。其次就是，<strong>对同一个资源尽量设计同样的访问步骤</strong>，保证每个到达资源所需要的耗时相近，以便于给上一个线程留出时间差进行处理。</p><h2 id="尾"><a href="#尾" class="headerlink" title="尾"></a>尾</h2><p>锁成为了神，他也具备了一些人类独有的情感，他不在执著是非。他也开始相信存在即合理。</p>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
          <category> SQL基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL格式应该这样写</title>
      <link href="2020/08/13/SQL%E6%97%A5%E8%AE%B0SQL%E6%A0%BC%E5%BC%8F%E5%BA%94%E8%AF%A5%E8%BF%99%E6%A0%B7%E5%86%99/"/>
      <url>2020/08/13/SQL%E6%97%A5%E8%AE%B0SQL%E6%A0%BC%E5%BC%8F%E5%BA%94%E8%AF%A5%E8%BF%99%E6%A0%B7%E5%86%99/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="开头"><a href="#开头" class="headerlink" title="开头"></a>开头</h2><p>原来从未注重过SQL的书写格式，写出来最长的有30行左右，当时居然还那么骄傲。😹 现在想想，30行一时爽，需求火葬场。看到自己超长的SQL，还有项目里其他的SQL，心中唏嘘不已。SQL也是代码，自己最近快要变成“SQL小王子”，作为王子，一定要优雅，那么在这里就把以后写SQL的格式规范一下，以便于后人一眼便可看出王子的背影。 🌟</p><h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p>格式参考，来源于<a href="https://javarevisited.blogspot.com/2017/01/a-better-way-to-write-sql-queries.html#ixzz66I8M2Yj5" target="_blank" rel="noopener">A Better way to write Complex SQL queries for Programmers</a>,感谢大佬让我成为王子，哈哈。</p><p>示例SQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.student_id, s.student_name, c.course_name</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> student_id, course_name</span><br><span class="line">      <span class="keyword">FROM</span> table_course</span><br><span class="line">      <span class="keyword">WHERE</span> grade &gt; <span class="number">60</span>) c</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> table_student s <span class="keyword">on</span> c.student_id = s.student_id</span><br><span class="line"><span class="keyword">WHERE</span> c.student_id &gt; <span class="number">1</span></span><br><span class="line">  <span class="comment">-- 如果你想知道这句SQL在干什么</span></span><br><span class="line">  <span class="comment">-- 那你就输了</span></span><br><span class="line">  <span class="keyword">AND</span> c.student_id &lt; <span class="number">100</span></span><br></pre></td></tr></table></figure><p>Tips:<br>1.为了可读性，可以将SQL拆分为多行，如上示例所示，如果存在嵌套查询仍然遵循此规范；</p><p>2.WHERE条件判断时，加入缩进同样会提升可读性；</p><p>3.拆分判断条件的好处是：能够在行与行之间进行注释；</p><h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>超短的博客，最近与SQL为伍，让写的SQL也能够优雅起来，才够得上“王子”。</p>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
          <category> SQL基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL必会知识点</title>
      <link href="2020/08/13/SQL%E5%BF%85%E4%BC%9A%E7%9F%A5%E8%AF%86/"/>
      <url>2020/08/13/SQL%E5%BF%85%E4%BC%9A%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>写成一句SQL很容易，但完全手打却还是有些困难。这个文章作为拾遗，把一些常用的语法和常识都放在一起，以供翻阅。参考的书籍为<a href="https://book.douban.com/subject/2297146//" target="_blank" rel="noopener"><em>SQL CookBook</em></a>。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="字段别名作用域"><a href="#字段别名作用域" class="headerlink" title="字段别名作用域"></a>字段别名作用域</h3><p>为字段取别名将在WHERE语句执行后才生效，但如果是子查询，则外部查询可以直接使用子查询别名；</p><p>正确示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> empolyee_salary</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="keyword">id</span>, <span class="keyword">SUM</span>(salary) <span class="keyword">AS</span> empolyee_salary</span><br><span class="line">      <span class="keyword">FROM</span> employee_salary</span><br><span class="line">      <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">id</span>)</span><br><span class="line"><span class="keyword">WHERE</span> empolyee_salary &gt; <span class="number">1000</span></span><br></pre></td></tr></table></figure><p>错误示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> book_name <span class="keyword">AS</span> book</span><br><span class="line"><span class="keyword">FROM</span> books</span><br><span class="line"><span class="keyword">WHERE</span> book = <span class="string">'1'</span></span><br></pre></td></tr></table></figure><h3 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h3><p>拼接字符串，SQL Server使用 <code>+</code> 即可，MySQL使用CONCAT函数；</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> book + <span class="string">'|'</span> + author</span><br><span class="line"><span class="keyword">FROM</span> books</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(book, <span class="string">'|'</span>, author)</span><br><span class="line"><span class="keyword">FROM</span> books</span><br></pre></td></tr></table></figure><h3 id="CASE-WHEN用法"><a href="#CASE-WHEN用法" class="headerlink" title="CASE WHEN用法"></a>CASE WHEN用法</h3><p>SELECT中使用条件逻辑CASE返回对应的固定值，类似于Java中的Switch-Case语法；</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_id,</span><br><span class="line">       <span class="keyword">CASE</span> <span class="keyword">WHEN</span> grade &gt; <span class="number">60</span> <span class="keyword">THEN</span> <span class="string">'及格'</span></span><br><span class="line">       <span class="keyword">CASE</span> <span class="keyword">WHEN</span> grade &gt; <span class="number">80</span> <span class="keyword">THEN</span> <span class="string">'良好'</span></span><br><span class="line">       <span class="keyword">ELSE</span> <span class="keyword">WHEN</span> grade &gt; <span class="number">90</span> <span class="keyword">THEN</span> <span class="string">'优秀'</span></span><br><span class="line">       <span class="keyword">ELSE</span> <span class="string">'不及格'</span></span><br><span class="line">       <span class="keyword">END</span> <span class="keyword">AS</span> <span class="string">'final_grade'</span></span><br><span class="line"><span class="keyword">FROM</span> grades</span><br></pre></td></tr></table></figure><p>当然，CASE也可以用于<code>ORDER BY</code>排序，例如，经理按照月薪降序排列，其他人则升序排列</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id</span><br><span class="line"><span class="keyword">FROM</span> grades</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> employee_type = <span class="string">'manager'</span></span><br></pre></td></tr></table></figure><h3 id="生成随机数"><a href="#生成随机数" class="headerlink" title="生成随机数"></a>生成随机数</h3><p>SQL Server使用<code>NEWID()</code>或<code>RAND()</code>,MySQL使用<code>RAND()</code>;</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_name,</span><br><span class="line">       <span class="comment">-- 一次查询出来的结果随机的数字是相同的</span></span><br><span class="line">       <span class="comment">-- FLOOR为地板函数 向下取整</span></span><br><span class="line">       <span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>() * <span class="number">10</span>),</span><br><span class="line">       <span class="comment">-- 不同列则随机数可能不同</span></span><br><span class="line">       <span class="comment">-- CEILING为天花板函数 向上取整</span></span><br><span class="line">       <span class="keyword">CEILING</span>(<span class="keyword">RAND</span>() * <span class="number">10</span>),</span><br><span class="line">       <span class="comment">-- NEWID()类似UUID 保证唯一</span></span><br><span class="line">       NEWID()</span><br><span class="line"><span class="keyword">FROM</span> students</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_name,</span><br><span class="line">       <span class="comment">-- 会生成0-1间的小数</span></span><br><span class="line">       <span class="keyword">RAND</span>()</span><br><span class="line"><span class="keyword">FROM</span> students</span><br></pre></td></tr></table></figure><h3 id="判断字段是否为空"><a href="#判断字段是否为空" class="headerlink" title="判断字段是否为空"></a>判断字段是否为空</h3><p>SQL Server可以用<code>ISNULL(字段, 默认值)</code>或<code>COALESCE(字段, 字段, 字段, 默认值)</code>，MySQL可以使用<code>IFNULL(字段, 默认值)</code>或<code>COALESCE(字段, 字段, 字段, 默认值)</code>;</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_name,</span><br><span class="line">       <span class="comment">-- COALESCE的好处在于可以用于判断多个字段为空时的操作</span></span><br><span class="line">       <span class="keyword">COALESCE</span>(student_gender, student_info, <span class="string">'empyt'</span>),</span><br><span class="line">       <span class="comment">-- ISNULL则只能对单个进行判断</span></span><br><span class="line">       <span class="keyword">ISNULL</span>(student_gender, <span class="string">'empty'</span>)</span><br><span class="line"><span class="keyword">FROM</span> students</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_name,</span><br><span class="line">       <span class="comment">-- COALESCE的好处在于可以用于判断多个字段为空时的操作</span></span><br><span class="line">       <span class="keyword">COALESCE</span>(student_gender, student_info, <span class="string">'empyt'</span>),</span><br><span class="line">       <span class="comment">-- ISNULL则只能对单个进行判断</span></span><br><span class="line">       <span class="keyword">IFNULL</span>(student_gender, <span class="string">'empty'</span>)</span><br><span class="line"><span class="keyword">FROM</span> students</span><br></pre></td></tr></table></figure><h3 id="计算时间差"><a href="#计算时间差" class="headerlink" title="计算时间差"></a>计算时间差</h3><p>SQL Server使用<a href="https://www.w3school.com.cn/sql/func_datediff.asp" target="_blank" rel="noopener"><code>DATEDIFF(时间维度(年、天、时、分、秒), 开始日期，结束日期)</code></a>,MySQL<br>使用<a href="https://blog.csdn.net/wangyang1354/article/details/51993848" target="_blank" rel="noopener"><code>TIMESTAMPDIFF(时间维度(年、天、时、分、秒), 开始日期，结束日期)</code></a>;</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 结果为1分钟</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEDIFF</span>(mi, <span class="string">'2019-11-26 21:54:40'</span>, <span class="string">'2019-11-26 21:55:00'</span>)</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 结果为0分钟</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">TIMESTAMPDIFF</span>(mi, <span class="string">'2019-11-26 21:54:40'</span>, <span class="string">'2019-11-26 21:55:00'</span>)</span><br></pre></td></tr></table></figure><h3 id="使用UNION-ALL代替UNION"><a href="#使用UNION-ALL代替UNION" class="headerlink" title="使用UNION ALL代替UNION"></a>使用<code>UNION ALL</code>代替<code>UNION</code></h3><p>尽量使用<code>UNION ALL</code>，而不使用<code>UNION</code>，因为<code>UNION</code>会对数据进行排序并进行相当于<code>DISTINC</code>的操作耗时;</p><h3 id="FULL-OUTER-JOIN使用以及JOIN的关系"><a href="#FULL-OUTER-JOIN使用以及JOIN的关系" class="headerlink" title="FULL OUTER JOIN使用以及JOIN的关系"></a><code>FULL OUTER JOIN</code>使用以及JOIN的关系</h3><p><code>FULL OUTER JOIN</code>用的很少，但是也很有用——可以筛选某个表中不存在的值,通俗理解就是筛选的两个表的补集;</p><p>其他JOIN的关系可以通过这个图理解：</p><p><a href="http://oltremare.cc/2019/11/27/SQL%E6%97%A5%E8%AE%B0-SQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/Join%E5%9B%BE%E7%A4%BA.png" target="_blank" rel="noopener"><img src="http://oltremare.cc/2019/11/27/SQL%E6%97%A5%E8%AE%B0-SQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/Join%E5%9B%BE%E7%A4%BA.png" alt="Join图示"></a></p><p><a href="http://oltremare.cc/2019/11/27/SQL%E6%97%A5%E8%AE%B0-SQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/Join%E5%9B%BE%E7%A4%BA.png" target="_blank" rel="noopener">Join图示</a></p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.isbn</span><br><span class="line"><span class="keyword">FROM</span> book_infos <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">full</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> outer_book <span class="keyword">AS</span> o <span class="keyword">ON</span> o.isbn = b.isbn</span><br><span class="line"><span class="comment">-- 筛选在outer_book表中不存在记录的isbn号</span></span><br><span class="line"><span class="keyword">WHERE</span> o.isbn <span class="keyword">IS</span> <span class="literal">NULL</span></span><br></pre></td></tr></table></figure><h3 id="OVER-函数用法"><a href="#OVER-函数用法" class="headerlink" title="OVER()函数用法"></a><code>OVER()</code>函数用法</h3><p><code>SUM/MIN/MAX...() OVER (PARTITION BY 字段)</code>可以用来进行累计统计分析和<code>GROUP BY</code>类似但不完全相同，在结果前加<code>DISTINCT</code>可以有相同的作用;</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 找出每种类型书籍的最低价格</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">MIN</span>(price) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> book_type), book_type</span><br><span class="line"><span class="keyword">FROM</span> book</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等价于GROUP BY</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(price), book_type</span><br><span class="line"><span class="keyword">FROM</span> book</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> book_type</span><br></pre></td></tr></table></figure><p>因为原来没有接触过，现在可以确定的一个使用场景是：对每个不同分类下的最好/最坏…进行筛选并展示。</p><h3 id="字符串切片"><a href="#字符串切片" class="headerlink" title="字符串切片"></a>字符串切片</h3><p>这是常用操作，讲某个字段值从前往后切割n位，SQL Server使用<code>SUBSTRING(字段,起始位,终止位)</code>，MySQL使用<code>SUBSTR(字段,起始位,终止位)</code>，注意这里的位置是从1开始计算的;</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Tom -&gt; To</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBSTRING</span>(student_name, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">FROM</span> students</span><br></pre></td></tr></table></figure><h3 id="IN与EXIST的使用"><a href="#IN与EXIST的使用" class="headerlink" title="IN与EXIST的使用"></a><code>IN</code>与<code>EXIST</code>的使用</h3><p>找到一篇<a href="https://www.cnblogs.com/ztf2008/archive/2009/02/01/1381996.html" target="_blank" rel="noopener">博文</a>，博主讲的用法值得尝试，先记录，以观后效；</p><p>简言之，外表数据量&gt;&gt;子查询表数据量，使用<code>IN</code>合适；<br>反之，外表数据量&lt;&lt;子查询表数据量，使用<code>EXIST</code>合适;</p><h3 id="使用MERGE进行表数据的同步"><a href="#使用MERGE进行表数据的同步" class="headerlink" title="使用MERGE进行表数据的同步"></a>使用<code>MERGE</code>进行表数据的同步</h3><p>快速对表中的数据进行更新并且插入新数据——使用<code>MERGE</code>关键字，在对同数据库表进行表间数据更新的时候，使用<code>MERGE</code>可以说是最佳选择，速度很快，但是跨数据库服务器，则不能使用;</p><p>关于Merge操作数据的解释<a href="http://www.sqlservertutorial.net/sql-server-basics/sql-server-merge/" target="_blank" rel="noopener">如图所示</a>：</p><p><a href="http://oltremare.cc/2019/11/27/SQL%E6%97%A5%E8%AE%B0-SQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/Merge%E5%9B%BE%E7%A4%BA.png" target="_blank" rel="noopener"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" alt="Merge操作解释"></a></p><p><a href="http://oltremare.cc/2019/11/27/SQL%E6%97%A5%E8%AE%B0-SQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/Merge%E5%9B%BE%E7%A4%BA.png" target="_blank" rel="noopener">Merge操作解释</a></p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">MERGE</span> target_table <span class="keyword">USING</span> source_table</span><br><span class="line"><span class="keyword">ON</span> merge_condition</span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">MATCHED</span></span><br><span class="line">    <span class="keyword">THEN</span> update_statement</span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">NOT</span> <span class="keyword">MATCHED</span></span><br><span class="line">    <span class="keyword">THEN</span> insert_statement</span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">NOT</span> <span class="keyword">MATCHED</span> <span class="keyword">BY</span> <span class="keyword">SOURCE</span></span><br><span class="line">    <span class="keyword">THEN</span> <span class="keyword">DELETE</span>;</span><br></pre></td></tr></table></figure><h3 id="列出某个表的所有列名"><a href="#列出某个表的所有列名" class="headerlink" title="列出某个表的所有列名"></a>列出某个表的所有列名</h3><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, data_type</span><br><span class="line"><span class="keyword">FROM</span> information_schema</span><br><span class="line"><span class="keyword">WHERE</span> table_schema = <span class="string">'SMEAGOL'</span></span><br><span class="line">  <span class="keyword">AND</span> table_name = <span class="string">'表名'</span></span><br></pre></td></tr></table></figure><h3 id="创建分隔符列表"><a href="#创建分隔符列表" class="headerlink" title="创建分隔符列表"></a>创建分隔符列表</h3><p>为表创建一个以X字符为分隔符的列表，例如：</p><table><thead><tr><th align="left">class_id</th><th align="left">sudent_name</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">Student_1</td></tr><tr><td align="left">A</td><td align="left">Student_2</td></tr><tr><td align="left">A</td><td align="left">Student_3</td></tr><tr><td align="left">B</td><td align="left">Student_4</td></tr><tr><td align="left">B</td><td align="left">Student_5</td></tr><tr><td align="left">B</td><td align="left">Student_6</td></tr></tbody></table><p>变为</p><table><thead><tr><th align="left">class_id</th><th align="left">sudent_name</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">Student_1,Student_2,Student_3</td></tr><tr><td align="left">B</td><td align="left">Student_4,Student_5,Student_6</td></tr></tbody></table><p>在SQL Server中使用<code>WITH</code>关键字来创建，MySQL中使用<code>GROUP_CONCAT</code>函数来创建;</p><h3 id="统计行数"><a href="#统计行数" class="headerlink" title="统计行数"></a>统计行数</h3><p>MySQL和SQL Server均使用<code>COUNT()</code>,但需要注意的是如果<code>COUNT()</code>中的参数为列名，则统计时会忽略<code>NULL</code>，而如果是传<code>*</code>或者常量，则会包含<code>NULL</code>;</p><h3 id="聚合函数对于NULL的处理"><a href="#聚合函数对于NULL的处理" class="headerlink" title="聚合函数对于NULL的处理"></a>聚合函数对于<code>NULL</code>的处理</h3><p>在进行聚合运算，例如:<code>SUM</code>、<code>AVG</code>等函数时，函数本身不会对值为<code>NULL</code>的行进行计数和计算，所以，要得到一个客观的聚合值，则需要使用<code>COALESCE</code>等填充函数;</p><h3 id="时间加减"><a href="#时间加减" class="headerlink" title="时间加减"></a>时间加减</h3><p>当前日期向前/向后n天/月/年(但不能加减时/分/秒),MySQL可以直接使用<code>INTERVAL ± 天数 DAY/MONTH/YEAR</code>来操作，而SQL Server使用函数<code>DATEADD()</code>来操作;</p><p>SQL Sever</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GETDATE() = 2019/12/10 23:05:33</span></span><br><span class="line"><span class="comment"># 输出 2019/12/05 23:05:33</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEADD</span>(<span class="keyword">DAY</span>, <span class="number">-5</span>, <span class="keyword">GETDATE</span>())</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NOW() = 2019/12/10 23:05:33</span></span><br><span class="line"><span class="comment"># 输出 2019/12/05 23:05:33</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>() - <span class="built_in">INTERVAL</span> <span class="number">5</span> <span class="keyword">DAY</span></span><br></pre></td></tr></table></figure><h3 id="获取当前系统时间"><a href="#获取当前系统时间" class="headerlink" title="获取当前系统时间"></a>获取当前系统时间</h3><p>两个数据库各不相同，代码如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出 2019/12/10 23:05:33</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">GETDATE</span>()</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出 2019/12/10 23:05:33</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>()</span><br></pre></td></tr></table></figure><h3 id="计算两个日期之间的天数差"><a href="#计算两个日期之间的天数差" class="headerlink" title="计算两个日期之间的天数差"></a>计算两个日期之间的天数差</h3><p>均使用<code>DATEDIFF</code>函数，只是MySQL只需要两个参数(终止时间, 起始时间)，SQL Server需要三个参数(天/月/年, 起始时间, 终止时间);</p><p>SQL Sever</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出 3</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEDIFF</span>(<span class="keyword">DAY</span>, <span class="string">'2019-10-07'</span>, <span class="string">'2019-10-10'</span>)</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出 3</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEDIFF</span>(<span class="string">'2019-10-10'</span>, <span class="string">'2019-10-07'</span>)</span><br></pre></td></tr></table></figure><h3 id="提取日期中的时分秒"><a href="#提取日期中的时分秒" class="headerlink" title="提取日期中的时分秒"></a>提取日期中的时分秒</h3><p>MySQL使用<code>DATE_FORMAT</code>,SQL Server使用<code>DATEPART</code>;</p><p>SQL Sever</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATEPART</span>(<span class="keyword">HOUR</span>, <span class="keyword">GETDATE</span>()) <span class="keyword">AS</span> <span class="keyword">HOUR</span>,</span><br><span class="line">       <span class="keyword">DATEPART</span>(<span class="keyword">MINUTE</span>, <span class="keyword">GETDATE</span>()) <span class="keyword">AS</span> <span class="keyword">MINUTE</span>,</span><br><span class="line">       <span class="keyword">DATEPART</span>(<span class="keyword">SECOND</span>, <span class="keyword">GETDATE</span>()) <span class="keyword">AS</span> <span class="keyword">SECOND</span>,</span><br><span class="line">       <span class="keyword">DATEPART</span>(<span class="keyword">YEAR</span>, <span class="keyword">GETDATE</span>()) <span class="keyword">AS</span> <span class="keyword">YEAR</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">HOUR</span> <span class="keyword">MINUTE</span> <span class="keyword">SECOND</span> <span class="keyword">YEAR</span></span><br><span class="line"> <span class="number">22</span>    <span class="number">14</span>     <span class="number">30</span>   <span class="number">2019</span></span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%k'</span>) <span class="keyword">AS</span> <span class="keyword">HOUR</span>,</span><br><span class="line">       <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%i'</span>) <span class="keyword">AS</span> <span class="keyword">MINUTE</span>,</span><br><span class="line">       <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%s'</span>) <span class="keyword">AS</span> <span class="keyword">SECOND</span>,</span><br><span class="line">       <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%d'</span>) <span class="keyword">AS</span> <span class="keyword">MONTH</span>,</span><br><span class="line">       <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%Y'</span>) <span class="keyword">AS</span> <span class="keyword">YEAR</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">HOUR</span> <span class="keyword">MINUTE</span> <span class="keyword">SECOND</span> <span class="keyword">YEAR</span></span><br><span class="line"> <span class="number">22</span>    <span class="number">14</span>     <span class="number">30</span>   <span class="number">2019</span></span><br></pre></td></tr></table></figure><h3 id="使用DENSE-RANK对满足前N类或后N类数值档次的数据进行检索"><a href="#使用DENSE-RANK对满足前N类或后N类数值档次的数据进行检索" class="headerlink" title="使用DENSE_RANK对满足前N类或后N类数值档次的数据进行检索"></a>使用<code>DENSE_RANK</code>对满足前N类或后N类数值档次的数据进行检索</h3><p>例如学生的补贴分为5档，现在要筛选出前3档补贴的学生名单，那么可以使用<code>DENSE_RANK</code>来实现;</p><table><thead><tr><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td></tr><tr><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td></tr><tr><td align="left">C</td><td align="left">Student_3</td><td align="left">500</td></tr><tr><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td></tr><tr><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td></tr><tr><td align="left">F</td><td align="left">Student_6</td><td align="left">300</td></tr></tbody></table><p>需要检索前3档补贴的同学名单</p><table><thead><tr><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th></tr></thead><tbody><tr><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td></tr><tr><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td></tr><tr><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td></tr><tr><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td></tr></tbody></table><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student_id, student_name, sudent_subsidy</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> student_id,</span><br><span class="line">             student_name,</span><br><span class="line">             sudent_subsidy,</span><br><span class="line">             <span class="keyword">DENSE_RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">ORDER</span> <span class="keyword">BY</span> sudent_subsidy <span class="keyword">DESC</span>) <span class="keyword">AS</span> subsidy_rank</span><br><span class="line">      <span class="keyword">FROM</span> students_info) <span class="keyword">AS</span> infos</span><br><span class="line"><span class="keyword">WHERE</span> subsidy_rank &lt;= <span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="ROW-NUMBER-RANK-DENSE-RANK-的区别"><a href="#ROW-NUMBER-RANK-DENSE-RANK-的区别" class="headerlink" title="ROW_NUMBER(),RANK(),DENSE_RANK()的区别"></a><code>ROW_NUMBER()</code>,<code>RANK()</code>,<code>DENSE_RANK()</code>的区别</h3><p><strong>结论</strong>：</p><p><code>ROW_NUMBER()</code><strong>无论数据行是否重复，均会给出独立的行号;</strong></p><p><code>RANK()</code><strong>会跳跃排序，如果遇到排序的列有重复的值时，则会跳过，例如有两个并列第3，那么排名第4的值行号将被记为5</strong></p><p><code>DENSE_RANK()</code><strong>会连续排序，和RANK()相反，如果遇到排序的列有重复的值时，不会跳过，例如有两个并列第3，那么排名第4的值行号将被记为4</strong></p><p>为方便理解，使用以下表数据为例</p><table><thead><tr><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td></tr><tr><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td></tr><tr><td align="left">C</td><td align="left">Student_3</td><td align="left">500</td></tr><tr><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td></tr><tr><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td></tr><tr><td align="left">F</td><td align="left">Student_6</td><td align="left">300</td></tr></tbody></table><p><code>ROW_NUMBER()</code>在任何时候都不会发生重复，计算表中有n条相同数据，<code>ROW_NUMBER()</code>后的行号也是不同的</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ROW_NUMBER() <span class="keyword">OVER</span>(<span class="keyword">ORDER</span> <span class="keyword">BY</span> sudent_subsidy) <span class="keyword">AS</span> row_num,</span><br><span class="line">       student_id,</span><br><span class="line">       sudent_name,</span><br><span class="line">       sudent_subsidy</span><br><span class="line"><span class="keyword">FROM</span> sudent_subsidy</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">row_num</th><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">F</td><td align="left">Student_6</td><td align="left">300</td></tr><tr><td align="left">2</td><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td></tr><tr><td align="left">3</td><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td></tr><tr><td align="left">4</td><td align="left">C</td><td align="left">Student_3</td><td align="left">500</td></tr><tr><td align="left">5</td><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td></tr><tr><td align="left">6</td><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td></tr></tbody></table><p>从返回的结果中，可以看出每一列数据均被赋予了新的一个行号，并不会因为某一列数据重复而重复。</p><p><code>RANK()</code>会跳跃排序，如果有并列，则会将跳过相同的行，直接加上向同行的偏移继续向后统计行号。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">ORDER</span> <span class="keyword">BY</span> sudent_subsidy) <span class="keyword">AS</span> <span class="keyword">rank</span>,</span><br><span class="line">       student_id,</span><br><span class="line">       sudent_name,</span><br><span class="line">       sudent_subsidy</span><br><span class="line"><span class="keyword">FROM</span> sudent_subsidy</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">rank</th><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">F</td><td align="left">Student_6</td><td align="left">300</td></tr><tr><td align="left"><strong>2</strong></td><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td></tr><tr><td align="left"><strong>2</strong></td><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td></tr><tr><td align="left">4  (rank 3不见了，直接从4开始)</td><td align="left">C</td><td align="left">Student_3</td><td align="left">500</td></tr><tr><td align="left">5</td><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td></tr><tr><td align="left">6</td><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td></tr></tbody></table><p>可以看到，行号从2直接跳到了4，重复行占据了本该3出现的行，则3就被抛弃了。</p><p><code>DENSE_RANK()</code>和<code>RANK()</code>相反，它保留了重复行之后的行号。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DENSE_RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">ORDER</span> <span class="keyword">BY</span> sudent_subsidy) <span class="keyword">AS</span> <span class="keyword">rank</span>,</span><br><span class="line">       student_id,</span><br><span class="line">       sudent_name,</span><br><span class="line">       sudent_subsidy</span><br><span class="line"><span class="keyword">FROM</span> sudent_subsidy</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">rank</th><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">F</td><td align="left">Student_6</td><td align="left">300</td></tr><tr><td align="left"><strong>2</strong></td><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td></tr><tr><td align="left"><strong>2</strong></td><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td></tr><tr><td align="left">3  (接着重复行的rank值继续向下排列)</td><td align="left">C</td><td align="left">Student_3</td><td align="left">500</td></tr><tr><td align="left">4</td><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td></tr><tr><td align="left">5</td><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td></tr></tbody></table><h3 id="结果集转置为多行"><a href="#结果集转置为多行" class="headerlink" title="结果集转置为多行"></a>结果集转置为多行</h3><p>原表数据为：</p><table><thead><tr><th align="left">emp_no</th><th align="left">ename</th><th align="left">job</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">DENY</td><td align="left">CLERK</td></tr><tr><td align="left">2</td><td align="left">GINY</td><td align="left">ANALYZER</td></tr><tr><td align="left">3</td><td align="left">YINE</td><td align="left">CLERK</td></tr><tr><td align="left">4</td><td align="left">MILLER</td><td align="left">CLERK</td></tr><tr><td align="left">5</td><td align="left">JAMES</td><td align="left">CLERK</td></tr><tr><td align="left">6</td><td align="left">CLRAKS</td><td align="left">MGRS</td></tr><tr><td align="left">7</td><td align="left">BLAKES</td><td align="left">MGRS</td></tr><tr><td align="left">8</td><td align="left">JONES</td><td align="left">MGRS</td></tr><tr><td align="left">9</td><td align="left">KING</td><td align="left">PREZ</td></tr><tr><td align="left">10</td><td align="left">TURNE</td><td align="left">SALES</td></tr><tr><td align="left">11</td><td align="left">MARTIN</td><td align="left">SALES</td></tr></tbody></table><p>如果一个查询的结果集如下所示：</p><table><thead><tr><th align="left">ename</th><th align="left">job</th></tr></thead><tbody><tr><td align="left">DENY</td><td align="left">CLERK</td></tr><tr><td align="left">GINY</td><td align="left">ANALYZER</td></tr><tr><td align="left">YINE</td><td align="left">CLERK</td></tr><tr><td align="left">MILLER</td><td align="left">CLERK</td></tr><tr><td align="left">JAMES</td><td align="left">CLERK</td></tr><tr><td align="left">CLRAKS</td><td align="left">MGRS</td></tr><tr><td align="left">BLAKES</td><td align="left">MGRS</td></tr><tr><td align="left">JONES</td><td align="left">MGRS</td></tr><tr><td align="left">KING</td><td align="left">PREZ</td></tr><tr><td align="left">TURNE</td><td align="left">SALES</td></tr><tr><td align="left">MARTIN</td><td align="left">SALES</td></tr></tbody></table><p>我们需要将其转置为职位-姓名，则我们可以使用<code>ROW_NUMBER() OVER(PARTITION BY job ORDER BY ename)</code>得到分组的行号，并结合<code>MAX()</code>聚合函数将其按照行号进行分组，得到最终的结果。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> job=<span class="string">'CLERK'</span></span><br><span class="line">                <span class="keyword">THEN</span> ename</span><br><span class="line">                <span class="keyword">ELSE</span> <span class="literal">NULL</span></span><br><span class="line">           <span class="keyword">END</span>) <span class="keyword">AS</span> <span class="string">'CLERK'</span>,</span><br><span class="line">        <span class="keyword">MAX</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> job=<span class="string">'ANALYZER'</span></span><br><span class="line">                <span class="keyword">THEN</span> ename</span><br><span class="line">                <span class="keyword">ELSE</span> <span class="literal">NULL</span></span><br><span class="line">           <span class="keyword">END</span>) <span class="keyword">AS</span> <span class="string">'ANALYZER'</span>,</span><br><span class="line">        <span class="keyword">MAX</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> job=<span class="string">'MGRS'</span></span><br><span class="line">                <span class="keyword">THEN</span> ename</span><br><span class="line">                <span class="keyword">ELSE</span> <span class="literal">NULL</span></span><br><span class="line">           <span class="keyword">END</span>) <span class="keyword">AS</span> <span class="string">'MGRS'</span>,</span><br><span class="line">        <span class="keyword">MAX</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> job=<span class="string">'PREZ'</span></span><br><span class="line">                <span class="keyword">THEN</span> ename</span><br><span class="line">                <span class="keyword">ELSE</span> <span class="literal">NULL</span></span><br><span class="line">           <span class="keyword">END</span>) <span class="keyword">AS</span> <span class="string">'PREZ'</span>,</span><br><span class="line">        <span class="keyword">MAX</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> job=<span class="string">'SALES'</span></span><br><span class="line">                <span class="keyword">THEN</span> ename</span><br><span class="line">                <span class="keyword">ELSE</span> <span class="literal">NULL</span></span><br><span class="line">           <span class="keyword">END</span>) <span class="keyword">AS</span> <span class="string">'SALES'</span></span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> ename,</span><br><span class="line">             job,</span><br><span class="line">             ROW_NUMBER() <span class="keyword">OVER</span>(<span class="keyword">PARTITION</span> <span class="keyword">BY</span> job <span class="keyword">ORDER</span> <span class="keyword">BY</span> ename) <span class="keyword">AS</span> <span class="string">'rn'</span></span><br><span class="line">      <span class="keyword">FROM</span> emp) <span class="keyword">AS</span> e</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> rn</span><br></pre></td></tr></table></figure><p>结果如下：</p><table><thead><tr><th align="left">CLERK</th><th align="left">ANALYZER</th><th align="left">MGRS</th><th align="left">PREZ</th><th align="left">SALES</th></tr></thead><tbody><tr><td align="left">DENY</td><td align="left">GINY</td><td align="left">BLAKES</td><td align="left">KING</td><td align="left">TURNE</td></tr><tr><td align="left">YINE</td><td align="left"></td><td align="left">JONES</td><td align="left"></td><td align="left">MARTIN</td></tr><tr><td align="left">JAMES</td><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr><tr><td align="left">MILLER</td><td align="left"></td><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h3 id="使用WITH-ROLLUP来对报表做简单小计"><a href="#使用WITH-ROLLUP来对报表做简单小计" class="headerlink" title="使用WITH ROLLUP来对报表做简单小计"></a>使用<code>WITH ROLLUP</code>来对报表做简单小计</h3><p>例如可以将报表中所有学生补贴总和进行总计，如果<code>GROUP BY</code>的字段变多，那么小计的行也会随之增加;</p><p>原始数据如下：</p><table><thead><tr><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th><th align="left">class</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td><td align="left">1</td></tr><tr><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td><td align="left">2</td></tr><tr><td align="left">C</td><td align="left">Student_3</td><td align="left">500</td><td align="left">3</td></tr><tr><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td><td align="left">1</td></tr><tr><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td><td align="left">2</td></tr><tr><td align="left">F</td><td align="left">Student_6</td><td align="left">300</td><td align="left">3</td></tr></tbody></table><p>SQL Sever</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COALESCE</span>(<span class="keyword">class</span>, <span class="string">'total'</span>), <span class="keyword">SUM</span>(sudent_subsidy)</span><br><span class="line"><span class="keyword">FROM</span> student_infos</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span>(<span class="keyword">class</span>)</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COALESCE</span>(<span class="keyword">class</span>, <span class="string">'total'</span>), <span class="keyword">SUM</span>(sudent_subsidy)</span><br><span class="line"><span class="keyword">FROM</span> student_infos</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">class</span> <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span></span><br></pre></td></tr></table></figure><p>使用了<code>ROLLUP</code>后的结果集为</p><table><thead><tr><th align="left">CLASS</th><th align="left">sudent_name</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">1000</td></tr><tr><td align="left">2</td><td align="left">1100</td></tr><tr><td align="left">3</td><td align="left">800</td></tr><tr><td align="left">total</td><td align="left">2900</td></tr></tbody></table><h3 id="多列共同进行协同总计和展示"><a href="#多列共同进行协同总计和展示" class="headerlink" title="多列共同进行协同总计和展示"></a>多列共同进行协同总计和展示</h3><p>在<code>WITH ROLLUP</code>的基础上进行扩展;</p><p>在23中，如果我们需要进行统计列不仅仅只是<code>student_name</code>,那么，我们仅仅使用<code>WITH ROLLUP</code>则会得到很多冗余行，例如，要按班级号和班级名称来共同计算每个班级的补贴和，并且展示班级号、班级名和补贴和，那么，我们需要引入<code>GROUPING()</code>来对每列的数据进行分组标记，在此处我们可以通过如下代码来查看<code>GROUPING()</code>在查询时会输出什么：</p><p>原始数据：</p><table><thead><tr><th align="left">student_id</th><th align="left">sudent_name</th><th align="left">sudent_subsidy</th><th align="left">class</th><th align="left">class_name</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">Student_1</td><td align="left">400</td><td align="left">1</td><td align="left">尖子班</td></tr><tr><td align="left">B</td><td align="left">Student_2</td><td align="left">400</td><td align="left">2</td><td align="left">快速班</td></tr><tr><td align="left">C</td><td align="left">Student_3</td><td align="left">500</td><td align="left">3</td><td align="left">平行班</td></tr><tr><td align="left">D</td><td align="left">Student_4</td><td align="left">600</td><td align="left">1</td><td align="left">尖子班</td></tr><tr><td align="left">E</td><td align="left">Student_5</td><td align="left">700</td><td align="left">2</td><td align="left">快速班</td></tr><tr><td align="left">F</td><td align="left">Student_6</td><td align="left">300</td><td align="left">3</td><td align="left">平行班</td></tr></tbody></table><p>SQL Sever</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">class</span>, class_name, <span class="keyword">GROUPING</span>(<span class="keyword">class</span>), <span class="keyword">GROUPING</span>(class_name), <span class="keyword">SUM</span>(sudent_subsidy) <span class="keyword">AS</span> <span class="string">'money'</span></span><br><span class="line"><span class="keyword">FROM</span> student_infos</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span>(<span class="keyword">class</span>, class_name)</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">class</span>, class_name, <span class="keyword">GROUPING</span>(<span class="keyword">class</span>), <span class="keyword">GROUPING</span>(class_name), <span class="keyword">SUM</span>(sudent_subsidy) <span class="keyword">AS</span> <span class="string">'money'</span></span><br><span class="line"><span class="keyword">FROM</span> student_infos</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">class</span>, class_name <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span></span><br></pre></td></tr></table></figure><p>输出的结果为</p><table><thead><tr><th align="left">class</th><th align="left">class_name</th><th align="left">GROUPING(class)</th><th align="left">GROUPING(class_name)</th><th align="left">money</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">尖子班</td><td align="left">0</td><td align="left">0</td><td align="left">1000</td></tr><tr><td align="left">A</td><td align="left">NULL</td><td align="left">0</td><td align="left">1</td><td align="left">1000</td></tr><tr><td align="left">B</td><td align="left">快速班</td><td align="left">0</td><td align="left">0</td><td align="left">1100</td></tr><tr><td align="left">B</td><td align="left">NULL</td><td align="left">0</td><td align="left">1</td><td align="left">1100</td></tr><tr><td align="left">C</td><td align="left">平行班</td><td align="left">0</td><td align="left">0</td><td align="left">800</td></tr><tr><td align="left">C</td><td align="left">NULL</td><td align="left">0</td><td align="left">1</td><td align="left">800</td></tr><tr><td align="left">NULL</td><td align="left">NULL</td><td align="left">0</td><td align="left">0</td><td align="left">2900</td></tr></tbody></table><p>我们可以看到<code>class_name</code>列，若<code>class_name</code>列在<code>ROLLUP</code>后为空，则<code>GROUPING(class_name)</code>的值为0，否则为1。这样我们就能够通过<code>GROUPING</code>函数区分出我们所需要的列的组合以及对应的统计数据。现在，我们只需要两个GROUPING列均为0的来作为最终结果，所以，我们把两个GROUPING列使用字符串进行拼接，而后即可取出值为<code>00</code>(SQL Server)/<code>0</code>(MySQL)和<code>2</code>(MySQL)的行来作为需要返回的列的标识：</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> <span class="keyword">result</span> <span class="keyword">AS</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> COALESC(<span class="keyword">class</span>, <span class="string">'合计'</span>), COALESC(class_name, <span class="string">'合计'</span>),</span><br><span class="line">       <span class="keyword">CAST</span>(<span class="keyword">GROUPING</span>(<span class="keyword">class</span>) <span class="keyword">AS</span> <span class="built_in">CHAR</span>(<span class="number">1</span>)) +  <span class="keyword">CAST</span>(<span class="keyword">GROUPING</span>(class_name) <span class="keyword">AS</span> <span class="built_in">CHAR</span>(<span class="number">1</span>)) <span class="keyword">AS</span> <span class="string">'combine'</span>,</span><br><span class="line">       <span class="keyword">SUM</span>(sudent_subsidy) <span class="keyword">AS</span> <span class="string">'total_money'</span></span><br><span class="line">  <span class="keyword">FROM</span> student_infos</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">class</span>, class_name <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">class</span>, class_name, total_money</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> combine = <span class="string">'00'</span></span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> <span class="keyword">result</span> <span class="keyword">AS</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> COALESC(<span class="keyword">class</span>, <span class="string">'合计'</span>), COALESC(class_name, <span class="string">'合计'</span>),</span><br><span class="line">       <span class="keyword">CAST</span>(<span class="keyword">GROUPING</span>(<span class="keyword">class</span>) <span class="keyword">AS</span> <span class="built_in">CHAR</span>(<span class="number">1</span>)) +  <span class="keyword">CAST</span>(<span class="keyword">GROUPING</span>(class_name) <span class="keyword">AS</span> <span class="built_in">CHAR</span>(<span class="number">1</span>)) <span class="keyword">AS</span> <span class="string">'combine'</span>,</span><br><span class="line">       <span class="keyword">SUM</span>(sudent_subsidy) <span class="keyword">AS</span> <span class="string">'total_money'</span></span><br><span class="line">  <span class="keyword">FROM</span> student_infos</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">class</span>, class_name <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">class</span>, class_name, total_money</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> combine = <span class="string">'2'</span></span><br><span class="line">  <span class="keyword">OR</span> combine = <span class="string">'0'</span></span><br></pre></td></tr></table></figure><p>结果为：</p><table><thead><tr><th align="left">class</th><th align="left">class_name</th><th align="left">money</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">尖子班</td><td align="left">1000</td></tr><tr><td align="left">B</td><td align="left">快速班</td><td align="left">1100</td></tr><tr><td align="left">C</td><td align="left">平行班</td><td align="left">800</td></tr><tr><td align="left">合计</td><td align="left">合计</td><td align="left">2900</td></tr></tbody></table><h3 id="GROUP-BY-1-ORDER-BY-1是什么意思"><a href="#GROUP-BY-1-ORDER-BY-1是什么意思" class="headerlink" title="GROUP BY 1/ORDER BY 1是什么意思"></a>GROUP BY 1/ORDER BY 1是什么意思</h3><p><code>GROUP BY 1</code> 和 <code>ORDER BY 1</code>和使用列名的效果相同，<code>1</code>、<code>2</code>代替了<code>SELECT</code>语句中的列别名。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> account_id, open_emp_id</span><br><span class="line">         ^^^^        ^^^^</span><br><span class="line">          <span class="number">1</span>           <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">account</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h3 id="INT转String-String转INT"><a href="#INT转String-String转INT" class="headerlink" title="INT转String/String转INT"></a>INT转String/String转INT</h3><p>INT -&gt; String</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONVERT</span>(<span class="built_in">CHAR</span>, <span class="number">123</span>)</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONVERT</span>(<span class="number">123</span>, <span class="built_in">CHAR</span>)</span><br></pre></td></tr></table></figure><p>String -&gt; INT</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONVERT</span>(<span class="built_in">INT</span>, <span class="number">123</span>)</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONVERT</span>(<span class="number">123</span>, <span class="keyword">UNSIGNED</span>)</span><br></pre></td></tr></table></figure><h3 id="字符串REPLACE"><a href="#字符串REPLACE" class="headerlink" title="字符串REPLACE"></a>字符串REPLACE</h3><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为BCD</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REPLACE</span>(<span class="string">'ABCD'</span>, <span class="string">'A'</span>, <span class="string">''</span>)</span><br></pre></td></tr></table></figure><h3 id="MySQL-GROUP-BY也可指定排序顺序"><a href="#MySQL-GROUP-BY也可指定排序顺序" class="headerlink" title="MySQL GROUP BY也可指定排序顺序"></a>MySQL GROUP BY也可指定排序顺序</h3><p>如果需要对分组后的数据按照分组信息进行降序排序，可以使用<code>GROUP BY 列名 DESC</code>实现，而不用再使用<code>ORDER BY</code>。<strong>注意：MySQL中如果要使用这样的语法特性，则需要特定的版本(MySQL 8.0以前可以使用)！</strong></p><h3 id="保留n位小数点"><a href="#保留n位小数点" class="headerlink" title="保留n位小数点"></a>保留n位小数点</h3><p>SQL Server稍有不同，在SQL Server中<code>ROUND</code>仅仅只起到从第几位其四舍五入的作用，如果小数点有6位，<code>ROUND(3.333333, 4)</code>的结果为3.333300，位数仍然是6位，只是从第4位起就四舍五入了而已，如果要截断成4位则使用<code>DECIMAL</code>即可。</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为 123.6</span></span><br><span class="line"><span class="comment">-- DECIMAL(18, 1)中 18为整个数字的总位数 可以根据实际的情况进行调整 1为截断的位数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CAST</span>(<span class="keyword">ROUND</span>(<span class="number">123.55</span>, <span class="number">1</span>) <span class="keyword">AS</span> <span class="built_in">DECIMAL</span>(<span class="number">18</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为 123.5</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ROUND</span>(<span class="number">123.54</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="向上-向下取整"><a href="#向上-向下取整" class="headerlink" title="向上/向下取整"></a>向上/向下取整</h3><p>向上取整</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为 124</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CEILING</span>(<span class="number">123.54</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输出为 123</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CEILING</span>(<span class="number">123</span>)</span><br></pre></td></tr></table></figure><p>MySQ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为 124</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CEILING</span>/<span class="keyword">CEIL</span>(<span class="number">123.54</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输出为 123</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CEILING</span>/<span class="keyword">CEIL</span>(<span class="number">123</span>)</span><br></pre></td></tr></table></figure><p>在MySQL中，<code>CEIL</code>和<code>CEILING</code>是同义的。</p><p>向下取整</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为 123</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FLOOR</span>(<span class="number">123.23</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输出为 123</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FLOOR</span>(<span class="number">123</span>)</span><br></pre></td></tr></table></figure><h3 id="区分二叉树的节点类型"><a href="#区分二叉树的节点类型" class="headerlink" title="区分二叉树的节点类型"></a>区分二叉树的节点类型</h3><p>此题来源于：<a href="https://www.hackerrank.com/challenges/binary-search-tree-1/problem" target="_blank" rel="noopener">Binary Tree Nodes</a></p><p>若存在一颗二叉树，其存储方式如下：</p><table><thead><tr><th align="left">node</th><th align="left">parent</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">2</td></tr><tr><td align="left">3</td><td align="left">2</td></tr><tr><td align="left">6</td><td align="left">8</td></tr><tr><td align="left">9</td><td align="left">8</td></tr><tr><td align="left">2</td><td align="left">5</td></tr><tr><td align="left">8</td><td align="left">5</td></tr><tr><td align="left">5</td><td align="left">NULL</td></tr></tbody></table><p>我们需要将其划分为<code>根节点</code>、<code>叶子节点</code>、<code>内部节点</code>三种属性。<br>那么我们可以使用自连接来判断每个节点所在位置，而后进行输出。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> B1.N <span class="keyword">AS</span> NODE,</span><br><span class="line">       <span class="keyword">CASE</span> <span class="keyword">WHEN</span> B1.P <span class="keyword">IS</span> <span class="literal">NULL</span> <span class="keyword">THEN</span> <span class="string">'Root'</span></span><br><span class="line">            <span class="keyword">WHEN</span> B2.N <span class="keyword">IS</span> <span class="literal">NULL</span> <span class="keyword">AND</span> B2.P <span class="keyword">IS</span> <span class="literal">NULL</span> <span class="keyword">THEN</span> <span class="string">'Leaf'</span></span><br><span class="line">            <span class="keyword">ELSE</span> <span class="string">'Inner'</span></span><br><span class="line">            <span class="keyword">END</span> <span class="keyword">AS</span> <span class="keyword">ATTRIBUTE</span></span><br><span class="line"><span class="keyword">FROM</span> BST <span class="keyword">AS</span> B1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> BST <span class="keyword">AS</span> B2 <span class="keyword">ON</span> B1.N = B2.P</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>结果为：</p><table><thead><tr><th align="left">node</th><th align="left">attribute</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">Leaf</td></tr><tr><td align="left">2</td><td align="left">Inner</td></tr><tr><td align="left">3</td><td align="left">Leaf</td></tr><tr><td align="left">5</td><td align="left">Root</td></tr><tr><td align="left">6</td><td align="left">Leaf</td></tr><tr><td align="left">8</td><td align="left">Inner</td></tr><tr><td align="left">9</td><td align="left">Leaf</td></tr></tbody></table><h3 id="数字开方-绝对值-幂次方"><a href="#数字开方-绝对值-幂次方" class="headerlink" title="数字开方/绝对值/幂次方"></a>数字开方/绝对值/幂次方</h3><p>开平方使用<code>SQRT</code>即可。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SQRT</span>(<span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>绝对值使用<code>ABS</code>即可。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ABS</span>(<span class="number">-2</span>)</span><br></pre></td></tr></table></figure><p>幂次方使用<code>POWER</code>即可。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输出为4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">POWER</span>(<span class="number">2</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="使用WITH进行复杂查询"><a href="#使用WITH进行复杂查询" class="headerlink" title="使用WITH进行复杂查询"></a>使用WITH进行复杂查询</h3><p>如果一个查询过于复杂，无法在一个查询中完成所有操作，可以考虑使用<code>WITH</code>关键词进行分步操作。<code>WITH</code>可以用于分布操作，同样也可以用于递归，将上一个操作结果集中的数据继续进行相同的处理。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> STEP1 <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="string">'STEP 1 OPERATION'</span></span><br><span class="line">    <span class="keyword">FROM</span> TEMP</span><br><span class="line">), STEP <span class="number">2</span> <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="string">'STEP 2 OPERATION CONTINUE WITH STEP 1'</span></span><br><span class="line">    <span class="keyword">FROM</span> STEP1</span><br><span class="line">), STEP3 <span class="keyword">AS</span>(</span><br><span class="line">    ...</span><br><span class="line">), ...</span><br><span class="line"> , <span class="keyword">RESULT</span> <span class="keyword">AS</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> *</span><br><span class="line">   <span class="keyword">FROM</span> STEPN</span><br><span class="line"> )</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'RESULT'</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">RESULT</span></span><br></pre></td></tr></table></figure><h3 id="通过JOIN进行区间到具体值的映射"><a href="#通过JOIN进行区间到具体值的映射" class="headerlink" title="通过JOIN进行区间到具体值的映射"></a>通过JOIN进行区间到具体值的映射</h3><p>此题来源于：<a href="https://www.hackerrank.com/challenges/the-report/problem" target="_blank" rel="noopener">The Report</a></p><p>如果提供了一个学生表和一个成绩对应的分级表(表如下)，但两个表之间并没有可以一一对应的主键外键关系，我们需要对每个学生的成绩所在的级别进行显示，我们可以使用如下的方式进行。</p><p>学生表Students</p><table><thead><tr><th align="left">student</th><th align="left">score</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">82</td></tr><tr><td align="left">B</td><td align="left">60</td></tr><tr><td align="left">C</td><td align="left">25</td></tr></tbody></table><p>成绩对应表Grades</p><table><thead><tr><th align="left">grade</th><th align="left">min_score</th><th align="left">max_score</th></tr></thead><tbody><tr><td align="left">优秀</td><td align="left">75</td><td align="left">100</td></tr><tr><td align="left">良好</td><td align="left">50</td><td align="left">74</td></tr><tr><td align="left">中等</td><td align="left">25</td><td align="left">49</td></tr><tr><td align="left">较差</td><td align="left">0</td><td align="left">24</td></tr></tbody></table><p>那么我们可以这样使用<code>JOIN</code>,来将每个学生的成绩级别进行映射，因为<code>ON</code>会先于<code>JOIN</code>对符合条件的数据进行匹配，所以每一条数据只会对应一个级别，我们就可以完成分数段到级别的匹配。</p><p>通用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student, grade</span><br><span class="line"><span class="keyword">FROM</span> Students</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> Grades <span class="keyword">ON</span> score <span class="keyword">BETWEEN</span> min_score <span class="keyword">AND</span> max_score</span><br></pre></td></tr></table></figure><p>结果</p><table><thead><tr><th align="left">student</th><th align="left">grade</th></tr></thead><tbody><tr><td align="left">A</td><td align="left">优秀</td></tr><tr><td align="left">B</td><td align="left">良好</td></tr><tr><td align="left">C</td><td align="left">较差</td></tr></tbody></table><h2 id="查看字符串是否包含特定字符"><a href="#查看字符串是否包含特定字符" class="headerlink" title="查看字符串是否包含特定字符"></a>查看字符串是否包含特定字符</h2><p>类似于Java的<code>contains()</code>函数，SQL Server和MySQL可以使用如下方式来得到结果，包含匹配的字符串，返回字符串的所在的<strong>第一个下标</strong>，不包含返回<code>0</code>。</p><p>PS:匹配的字符串不仅可以是独立的字符，同样也可以是正则表达式。</p><p>SQL Server</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 匹配的字符串存在的情况</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">PATINDEX</span>(<span class="string">'%O%'</span>, <span class="string">'Oltremare'</span>)</span><br><span class="line"><span class="comment">-- 输出 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 匹配的字符串不存在的情况</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">PATINDEX</span>(<span class="string">'%X%'</span>, <span class="string">'Oltremare'</span>)</span><br><span class="line"><span class="comment">-- 输出 0</span></span><br></pre></td></tr></table></figure><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 匹配的字符串存在的情况</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSTR</span>(<span class="string">'Oltremare'</span>, <span class="string">'%O%'</span>)</span><br><span class="line"><span class="comment">-- 输出 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 匹配的字符串不存在的情况</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSTR</span>(<span class="string">'Oltremare'</span>, <span class="string">'%X%'</span>)</span><br><span class="line"><span class="comment">--输出 0</span></span><br></pre></td></tr></table></figure><p><code>%</code>用于模糊匹配，<code>%X</code>表示匹配以<code>X</code>结尾的<code>X</code>下标，反之，<code>X%</code>表示匹配以<code>X</code>开头的<code>X</code>下标，<strong>必须要使用至少一个%来进行匹配查询</strong>。</p><p>待续…</p>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
          <category> SQL基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLServer默认连接字符串</title>
      <link href="2020/08/13/SqlServer%E9%BB%98%E8%AE%A4%E8%BF%9E%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>2020/08/13/SqlServer%E9%BB%98%E8%AE%A4%E8%BF%9E%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="SQLServer默认连接字符串"><a href="#SQLServer默认连接字符串" class="headerlink" title="SQLServer默认连接字符串"></a>SQLServer默认连接字符串</h1><p>Server=localhostSQLEXPRESS;Database=master;Trusted_Connection=True;</p><p>​    </p>]]></content>
      
      
      <categories>
          
          <category> SQLServer </category>
          
          <category> SQLServer基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQLServer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java动态代理</title>
      <link href="2020/08/13/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/"/>
      <url>2020/08/13/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="卷首语"><a href="#卷首语" class="headerlink" title="卷首语"></a>卷首语</h2><blockquote><p>最遥不可及的不是十年后，而是今天之前。</p></blockquote><p>今天要说的内容从前本人便已经坐过文章，而且，那时候动态代理还是本人第一次在网上发的博客。时隔三年，又来炒冷饭。成长了也没有成长。长大的过程就是这样曲折蜿蜒，总让人有种不真实的感觉，坐在同一个房间，写着同样的内容，浮现的回忆却不一样。时间真是不可思议的东西。</p><p>那么，今天就想从前那样，从头认识一下这个熟悉的陌生人——动态代理。不过要了解动态代理，最好还是把代理模式给弄清楚。</p><h2 id="静态代理模式"><a href="#静态代理模式" class="headerlink" title="静态代理模式"></a>静态代理模式</h2><p>一来就开始怼概念，那和别人的文章又有何别？我喜欢讲故事，所以今天先讲个故事。话说王二是个王老五，至于是不是钻石级别的，那咱就不得而知了。不过，他这人生来就有个毛病，总觉得这世上每个女人都喜欢他，也许就是因为这个毛病，没几个女人想和他说话。就好像走路上时遇到的飞虫，叨扰你却总觉得是因为你闯进了它的领地造成的。过了而立之年，王二终于发现没人陪是那么一点寂寞。但自己的名声在这个镇子上早臭了。可好巧不巧，他就在镇上遇到了心动的女子。碍于自己的臭名声，他不敢接近她。没法，他向了无大仙求助。大仙看在他平日里还是会偷偷给自己送几只烧鸡的份上，也就答应帮他一把，他让王二留下了一缕头发，叫王二三天后来取宝物。</p><p>三日过后，王二屁颠屁颠跑到大师那里，顺带又带了两只烧鸡。等大师风卷残云之后，心满意足的从口袋里拿出一个头套。说着，“拿去吧，在上街之前，对着头套把你想要他帮你改掉的毛病对他说了，再把它带到头上就可以了”。王二谢过大师之后，就戴着头套跑回了家。到家后，他感到装着的头套和自己的心跳保持着同样的频率。他小心翼翼取出头套。在心里默念：“帮我在那个女人面前表现得诚恳一些，不要说一些自恋的话。”之间头套轻轻动了下，就慢慢飘到他头上去了，就好像答应他似的。每次遇到那些女人，王二都会通过头套组织好语言，和她们寒暄几句。镇上的人也发现了王二的转变，王二心仪的女子也慢慢王二热络起来。一切都朝着美好的方向发展着。</p><p>故事说了一半，但这一部分已经足够去重新阐述和了解代理模式是什么？在理解代理模式之前，我们先确定几件事，委托者，代理者，需求接口。那么，故事里的这些意象又是指的什么呢？首先，是我们的主角王二，他充当的角色是委托者，他想要让头套帮助自己润色语言。其次，便是头套，这个意象其实就是所说的代理者，由它去代替王二润色语言，把润色后的语言告诉王二，让王二把话说出来就好了。最后，便是王二向头套说自己需求的过程，这个过程抽象后，其实就是需求接口。王二和头套的关联在于王二把需求告知了头套，而<strong>代理模式则是让委托者和代理者都实现了需求接口</strong>，从而达到了代理者能够在委托者执行响应操作前进行一些特定的业务逻辑，同时，这样的操作又不会对原有的委托者对象代码有任何的影响。</p><p>那么把这一段故事用代码表示就可以是这样的：</p><p>王二告知头套想要他帮忙做的事：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IWhatWangWannaDo</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 说话</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> word 说的内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sayWord</span><span class="params">(String word)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>王二这个人：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Wang</span> <span class="keyword">implements</span> <span class="title">IWhatWangWannaDo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayWord</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"王二说：%s"</span>, word));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>头套：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeadGearProxy</span> <span class="keyword">implements</span> <span class="title">IWhatWangWannaDo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Wang wang;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可以理解为戴在了王二的头上</span></span><br><span class="line">    <span class="comment">// 以便于控制王二</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HeadGearProxy</span><span class="params">(Wang wang)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.wang = wang;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayWord</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        String hornedWord = hornWord(word);</span><br><span class="line">        wang.sayWord(hornedWord);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用于对王二的话进行润色</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> word 王二要说的话</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 润色后的话</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hornWord</span><span class="params">(String word)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!word.equals(<span class="string">"你一定是喜欢我吧？"</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"今晚月色真美"</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">"明天见"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们开始故事之后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Story</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 从前有个人叫王二</span></span><br><span class="line">        Wang wang = <span class="keyword">new</span> Wang();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 王二带上了头套</span></span><br><span class="line">        HeadGearProxy headGearProxy = <span class="keyword">new</span> HeadGearProxy(wang);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 旁白</span></span><br><span class="line">        System.out.println(<span class="string">"王二想说：你怕是喜欢我吧？"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 头套帮王二对话语进行了润色</span></span><br><span class="line">        <span class="comment">// 但真正说话的人还是王二</span></span><br><span class="line">        headGearProxy.sayWord(<span class="string">"你怕是喜欢我吧？"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过代码运行，我们可以看到：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">王二想说：你怕是喜欢我吧？</span><br><span class="line">王二说：今晚月色真美</span><br></pre></td></tr></table></figure><p>从代码里，我们也在此看到了头套只是一个处理语言的代理角色，真正说话的人仍然是王二。这也就是代理模式的本质。<strong>代理者在委托人执行真实操作之前货或之后进行其他与委托人代码逻辑不相关的一些操作，同时，执行这些操作时，并不影响委托人原本的代码情况</strong>。</p><h2 id="动态代理模式"><a href="#动态代理模式" class="headerlink" title="动态代理模式"></a>动态代理模式</h2><p>现在我们了解了静态代理模式，那么进一步了解动态代理模式也就水到渠成。不过，现在还不能直接说动态代理，因为王二的故事还要继续。</p><p>话说，在王二追求到心仪女子之后，他的胃口也越来越到，并不仅限于搭讪，坑蒙拐骗的计俩，他都于要求头套帮他完成。而头套似乎不堪重负，再也没有听完他的需求之后，飘到他的脑袋上了。这可急坏了王二，他赶紧跑到了无大师那里，问他怎么回事。大师看了看头套，笑着对他说，“心仪之人已入怀中，又何必再求其施舍？”。王二急忙奉上烤鸡，外加五十两的银票。大师不紧不慢的把烤鸡吃了，却把银票还给了王二。大师从兜里掏出了一张人皮，对王二说道，“他可以满足你的一切需要，你穿上他，他会知道你的想法，直接替你完成，不用你再和他交代什么了，只是不要被他引往歧途。”王二谢过到大师，直接把人皮套在了自己身上，从那之后，王二通过坑蒙拐骗，夺得腰缠万贯。</p><p>故事有挤牙膏一样挤出来一小段，但这一小段就足以把动态代理理解了。<strong>动态代理相比于静态代理，其实只是实现代理的方式不同，静态代理之所以静态，就是代理者本身需要对需求接口进行实现，而动态代理，则不然，他将整个需求接口反射为类，并将委托人对象传入代理类，通过反射的原理获取到真实执行委托人方法的对象</strong>。动态代理主要的几个关键点是：委托者、代理者、需求接口、反射调用方法的接口。首先，王二仍然是委托者，其次，人皮则为代理者，其三，王二的所想要做的事则仍然是需求接口，最后，人皮通过读取王二想法的过程可以理解为动态代理接口InvocationHandler通过反射调用需求方法的过程。</p><p>好了，同样的，我们还是用代码再来演绎一遍这个故事吧。</p><p>王二心中想做的事：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface IWhatWangWannaDo &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 说话</span><br><span class="line">     * @param word 说的内容</span><br><span class="line">     */</span><br><span class="line">    void sayWord(String word);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>王二这个人：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Wang implements IWhatWangWannaDo &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void sayWord(String word) &#123;</span><br><span class="line">        System.out.println(String.format(&quot;王二说：%s&quot;, word));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>人皮：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.reflect.InvocationHandler;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line">public class SkinProxy implements InvocationHandler &#123;</span><br><span class="line">    private Object object;</span><br><span class="line"></span><br><span class="line">    // 可以理解为把人皮穿在了王二身上</span><br><span class="line">    public SkinProxy(Object object) &#123;</span><br><span class="line">        this.object = object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 用于对王二的话进行润色</span><br><span class="line">     * @param word 王二要说的话</span><br><span class="line">     * @return 润色后的话</span><br><span class="line">     */</span><br><span class="line">    public String hornWord(String word)&#123;</span><br><span class="line">        if (word.equals(&quot;其实这个一文不值&quot;))</span><br><span class="line">            return &quot;童叟无欺，价值千金百两&quot;;</span><br><span class="line">        else</span><br><span class="line">            return &quot;最低五十两&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object invoke(Object o, Method method, Object[] objects) throws Throwable &#123;</span><br><span class="line">        objects[0] = hornWord((String) objects[0]);</span><br><span class="line">        return method.invoke(object, objects);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们开始故事之后：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Story &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 穿上人皮</span><br><span class="line">        SkinProxy proxyIpProcessor = new SkinProxy(new Wang());</span><br><span class="line"></span><br><span class="line">        // 人皮读取了王二的思想</span><br><span class="line">        IWhatWangWannaDo whatWangWannaDo = (IWhatWangWannaDo) Proxy.newProxyInstance(IWhatWangWannaDo.class.getClassLoader(), new Class[] &#123;IWhatWangWannaDo.class&#125;, proxyIpProcessor);</span><br><span class="line"></span><br><span class="line">        // 执行王二的需求最终说话的人仍然是王二</span><br><span class="line">        System.out.println(&quot;王二想说：其实这个一文不值&quot;);</span><br><span class="line">        whatWangWannaDo.sayWord(&quot;其实这个一文不值&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过运行代码，我们可以看到：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">王二想说：其实这个一文不值</span><br><span class="line">王二说：童叟无欺，价值千金百两</span><br></pre></td></tr></table></figure><p>经过润色后的话语，总是令人信服却又多了许多的虚伪。通过代码，我们可以从实现的接口来区分动态代理和静态代理，动态代理代理类实现的是Java反射包下的InvocationHandler接口，而静态代理则是普通的需求接口。正是因为这两个接口的思想不同，所以，使得动态代理能够在运行时再去通过反射获取真实执行委托类的方法，并在invoke()方法里进行调用。从故事里我们也可以得知，因为人皮这个代理者并不需要去主动听王二讲需求(不用实现需求接口)，而是通过读取王二的思想了解需求，所以人皮其实也是可以被其他人所使用的，其方法和过程同王二相同。动态代理的作用也是如此，当有多个委托者类，同时都有相同的需求接口时，可以通过同一个代理类对其进行动态调用，而不需要重复实现多个代理类区分别代理他们。这样大大简化了开发流程，同样，在Spring框架中也能够发光发热。如果真的理解了动态代理，那么对于理解依赖注入(IoC)/控制反转(DI)这两个概念也会更容易。</p><h2 id="动态代理的作用"><a href="#动态代理的作用" class="headerlink" title="动态代理的作用"></a>动态代理的作用</h2><p>动态代理在我们真实开发环境中其实应用不会太多，而对于框架的设计与开发则十分重要，在这里由于本人技术的限制就简单把网上冲浪来的几种用途进行总结吧。</p><ul><li>添加日志</li><li>权限控制</li><li>加验证</li><li>Spring AOP核心思想</li></ul><p>对于开发和实际应用中是如何进行动态代理使用的，主要分为两种途径。</p><ul><li>Java反射包中的InvocationHandler接口。这种使用方式主要针对委托对象拥有需求接口，这样反射才能够正常的被使用。</li><li>CGLib库。这种方式应用于委托类并没有实现需求接口，而代理类是通过CGLib在底层实现了类的继承从而进行动态代理，这个在Spring中应用广泛。</li></ul><p>这两者的效率在高版本中已经相差甚小，低版本中CGLib占有绝对的优势，不过这两者应用的场景不同，所以，不能单从效率这个角度出发去分析。</p><h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>关于动态代理的总结到这里也就结束了，通篇来看，对于动态代理的认识相比三年前有所提升，但仍有许多不足，经验和学习都还有所欠缺。希望三年之后，又会有全新的收获。</p><p>且慢，对于虽然技术是讲完了，但是我们的故事还没有结尾。王二究竟会有何种结局？结局的内容和我们今天所讨论的技术并无关联，现在就让我们来看看……王二自从穿上了人皮之后，从一个普通百姓变成了富甲一方的商人。王二本以为抱得美人归加之腰缠万贯就是他后半生的宿命。可谁知，他醉生梦死的后一天造成，人皮竟然自己有了血肉之躯，可以直接拿王二声音说话，由王二的所有特点。等王二发现时，他自己已经不能说话，而且脸部被人皮腐蚀得面目全非。他很惊恐，四处寻找着人皮，终于，在自己的安乐窝看到了人皮抱着风尘女子快活的模样，他想要进去把人皮撕碎，可被自己的家丁当做是乞丐赶到了大街上。他失魂落魄的走着，无意识间竟然走到了大师的府上，大师似乎未卜先知，早已在门口等候。他说不出话，只能不停朝大师比划。大师只是对他轻蔑的笑了笑，手一挥，人皮就回到了大师的袋中。王二以为事情就此结束了，但从镜子中看到，自己的脸仍然没有任何的变化，同样也不能说话。但他仍然忘不了自己当初的爱人，以杂役的身份重新回到了自己的府邸，每天都可以在清晨瞥到爱人打开窗户，那样的芳容仍然令他留恋。府上的人都以为这个府邸真正的主人另有其人，所以对于王二的消失只口不提。王二的爱人也就像王二从未出现过一般，从未谈及过王二的消失。每天结束工作的王二躺在床上，在昏昏欲睡时，他仿佛从镜中看到了另一个人，他在想自己究竟是不是王二，又或许自己其实才是人皮，而真正的自己早已落入了大师的口袋？</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> java基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux系统软件安装</title>
      <link href="2020/08/13/linux%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
      <url>2020/08/13/linux%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="linux系统安装nginx"><a href="#linux系统安装nginx" class="headerlink" title="linux系统安装nginx"></a>linux系统安装nginx</h1><p>​    Nginx是一款轻量级的网页服务器、反向代理服务器，它的优势就是内存占用少，稳定性高。下面详细说明Nginx的安装步骤。</p><p>1.我们需要安装gcc  gcc-  gcc+的编译环境</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-gcc+ kernel-devel  //安装gcc、c++编译器以及内核文件</span><br></pre></td></tr></table></figure><p>2、首先安装必要的库（nginx 中gzip模块需要 zlib 库，rewrite模块需要 pcre 库，ssl 功能需要openssl库）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">（1）安装PCRE库</span><br><span class="line">cd /usr/local/</span><br><span class="line">wget http://jaist.dl.sourceforge.net/project/pcre/pcre/8.33/pcre-8.33.tar.gz</span><br><span class="line">tar -zxvf pcre-8.33.tar.gz</span><br><span class="line">cd pcre-8.33</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">(2) 安装SSL库</span><br><span class="line"> cd /usr/local/</span><br><span class="line"> wget http://www.openssl.org/source/openssl-1.0.1j.tar.gz</span><br><span class="line"> tar -zxvf  openssl-1.0.1j.tar.gz</span><br><span class="line"> cd openssl-1.0.1j</span><br><span class="line"> ./configure</span><br><span class="line"> make &amp;&amp; make install</span><br><span class="line">(3) 安装zlib库存</span><br><span class="line">cd /usr/local</span><br><span class="line">wget  http://zlib.net/zlib-1.2.11.tar.gz</span><br><span class="line">tar -zxvf zlib-1.2.11.tar.gz</span><br><span class="line">cd zlib-1.2.11</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">(4) 安装 OpenSSL library</span><br><span class="line">yum -y install openssl openssl-devel</span><br><span class="line">（5）安装 nginx</span><br><span class="line">cd /usr/local/</span><br><span class="line">wget http://nginx.org/download/nginx-1.8.0.tar.gz</span><br><span class="line">tar -zxvf nginx-1.8.0.tar.gz</span><br><span class="line">cd nginx-1.8.0</span><br><span class="line">./configure --user=nobody --group=nobody --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_gzip_static_module --with-http_realip_module --with-http_sub_module --with-http_ssl_module</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>到这里nglix就已经安装完成了：<br><img src="https://s1.ax1x.com/2020/08/13/aznKHO.png" alt="1"></p><p>然后我们安装好nginx之后，需要在系统的环境变量的配置文件中添加我们nginx的环境，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">PATH=$PATH:/usr/local/nginx/sbin</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure><p>保存退出之后我们需要执行以下命令：source /etc/profile 命令，让我们添加的环境生效。然后我们去我们nginx路径下启动我们的nginx 然后就可以在浏览器上访问我们的启动的效果：</p><p><img src="https://s1.ax1x.com/2020/08/13/azMgKI.png" alt="1"></p><p># </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> linux安装软件遇坑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片url转为base64编码</title>
      <link href="2020/08/13/%E5%9B%BE%E7%89%87url%E8%BD%AC%E4%B8%BAbase64%E7%BC%96%E7%A0%81/"/>
      <url>2020/08/13/%E5%9B%BE%E7%89%87url%E8%BD%AC%E4%B8%BAbase64%E7%BC%96%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="多平台中间系统记录"><a href="#多平台中间系统记录" class="headerlink" title="多平台中间系统记录"></a>多平台中间系统记录</h1><p>​    由于开发拼多多的第三方服务系统，需要调用拼多多中的图片上传接口，其中参数要求是将img格式图片转为base64编码进行入参。但是我们这边的图片都是url形式提供的，想想思路大概是将图片通过http方式下载为二进制流形式然后再用base64的工具类进行转码。果然百度上有现成的轮子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过图片的url获取图片的base64字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> imgUrl    图片url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>    返回图片base64的字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">image2Base64</span><span class="params">(String imgUrl)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        URL url = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        ByteArrayOutputStream outStream = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        HttpURLConnection httpUrl = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">            url = <span class="keyword">new</span> URL(imgUrl);</span><br><span class="line"></span><br><span class="line">            httpUrl = (HttpURLConnection) url.openConnection();</span><br><span class="line"></span><br><span class="line">            httpUrl.connect();</span><br><span class="line"></span><br><span class="line">            httpUrl.getInputStream();</span><br><span class="line"></span><br><span class="line">            is = httpUrl.getInputStream();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            outStream = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//创建一个Buffer字符串</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">            <span class="comment">//每次读取的字符串长度，如果为-1，代表全部读取完毕</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//使用一个输入流从buffer里把数据读取出来</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>( (len=is.read(buffer)) != -<span class="number">1</span> )&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//用输出流往buffer里写入数据，中间参数代表从哪个位置开始读，len代表读取的长度</span></span><br><span class="line"></span><br><span class="line">                outStream.write(buffer, <span class="number">0</span>, len);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 对字节数组Base64编码</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> Base64Util.encode(outStream.toByteArray());</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">            e.printStackTrace();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">finally</span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(is != <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                    is.close();</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(outStream != <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                    outStream.close();</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(httpUrl != <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                httpUrl.disconnect();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> imgUrl;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后使用Base64工具类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Base64Util</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串转图片</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> base64Str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decode(String base64Str)&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">null</span>;</span><br><span class="line">        BASE64Decoder decoder = <span class="keyword">new</span> BASE64Decoder();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            b = decoder.decodeBuffer(replaceEnter(base64Str));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 图片转字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> image</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encode</span><span class="params">(<span class="keyword">byte</span>[] image)</span></span>&#123;</span><br><span class="line">        BASE64Encoder decoder = <span class="keyword">new</span> BASE64Encoder();</span><br><span class="line">        <span class="keyword">return</span> replaceEnter(decoder.encode(image));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encode</span><span class="params">(String uri)</span></span>&#123;</span><br><span class="line">        BASE64Encoder encoder = <span class="keyword">new</span> BASE64Encoder();</span><br><span class="line">        <span class="keyword">return</span> replaceEnter(encoder.encode(uri.getBytes()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@path</span>    图片路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] imageTobyte(String path)&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">null</span>;</span><br><span class="line">        FileImageInputStream input = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            input = <span class="keyword">new</span> FileImageInputStream(<span class="keyword">new</span> File(path));</span><br><span class="line">            ByteArrayOutputStream output = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> numBytesRead = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((numBytesRead = input.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                output.write(buf, <span class="number">0</span>, numBytesRead);</span><br><span class="line">            &#125;</span><br><span class="line">            data = output.toByteArray();</span><br><span class="line">            output.close();</span><br><span class="line">            input.close();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">replaceEnter</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        String reg =<span class="string">"[\n-\r]"</span>;</span><br><span class="line">        Pattern p = Pattern.compile(reg);</span><br><span class="line">        Matcher m = p.matcher(str);</span><br><span class="line">        <span class="keyword">return</span> m.replaceAll(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意事项：base64编码前面还要加上：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data:image/jpg;base64,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> java基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx部署Hexo博客</title>
      <link href="2020/08/13/nginx%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2/"/>
      <url>2020/08/13/nginx%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="使用centos-7系统-用Nginx代理hexo博客的静态文件"><a href="#使用centos-7系统-用Nginx代理hexo博客的静态文件" class="headerlink" title="使用centos 7系统 用Nginx代理hexo博客的静态文件"></a>使用centos 7系统 用Nginx代理hexo博客的静态文件</h2><p>在本地使用hexo g 命令生成的public 文件，我们将public目录拷贝的Nginx的html目录中然后做一下配置即可：</p><p><img src="https://s1.ax1x.com/2020/08/14/dCQb6g.png" alt></p><p>然后我们就可以在浏览器上访问我们的博客了</p><p><img src="https://s1.ax1x.com/2020/08/14/dClknJ.png" alt></p><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>我在linux系统也安装的node.js和 hexo，但是在linux 系统上面打包的public文件代理出来，没有页面显示，调试了很久也不行，因此在windows系统将打包好的public 目录文件，拷贝到linux系统放在nginx里面才行。巨坑，花了我很长的时间才解决，配置文件什么都没有问题，哎，服 了。</p>]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
          <category> nginx部署 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决MySQL数据导入  xxx don&#39;t exist 的问题</title>
      <link href="2020/08/13/%E8%A7%A3%E5%86%B3MySQL%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%97%B6xxx%20don&#39;t%20exist%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>2020/08/13/%E8%A7%A3%E5%86%B3MySQL%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%97%B6xxx%20don&#39;t%20exist%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="解决MySQL数据导入时-xxx-doesn’t-exist的问题"><a href="#解决MySQL数据导入时-xxx-doesn’t-exist的问题" class="headerlink" title="解决MySQL数据导入时 xxx doesn’t exist的问题"></a>解决MySQL数据导入时 xxx doesn’t exist的问题</h1><h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>在从Windows的Navicat导出MySQL表结构以及数据之后，不能把导出的sql重新导入到Linux中的MySQL，一直报错表”xxx doesn’t exist”。为了解决这个问题，找到以下两种解决方案，再次进行记录，以备不时之需。</p><h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><h3 id="1-修改Linux中my-cnf配置文件中的大小写敏感字段"><a href="#1-修改Linux中my-cnf配置文件中的大小写敏感字段" class="headerlink" title="1.修改Linux中my.cnf配置文件中的大小写敏感字段"></a>1.修改Linux中my.cnf配置文件中的大小写敏感字段</h3><p>因为Linux中，MySQL默认大小写敏感，所以，如果直接使用<code>source xxx.sql</code>来进行表和数据导入，那么，有可能会报错”xxx doesn’t exist”。此时，我们需要在Linux系统路径<code>/etc/mysql/my.cnf</code>的文件<code>[mysqld]</code>节点下加入如下键值对，则可能解决问题。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 网上很多都说改成1 但是本人测试改为1后无法正常启动</span><br><span class="line">lower_case_table_names = 2</span><br></pre></td></tr></table></figure><h3 id="2-使用mysqldump导出sql文件"><a href="#2-使用mysqldump导出sql文件" class="headerlink" title="2. 使用mysqldump导出sql文件"></a>2. 使用mysqldump导出sql文件</h3><p>参考<a href="https://www.cnblogs.com/hellxz/p/7654434.html" target="_blank" rel="noopener">这篇文章</a>文章后发现，如果跨系统导出的话，使用<code>mysqldump</code>可以避免报错表”xxx doesn’t exist”，而且几乎没有MySQL版本不匹配的问题。在Windows系统<code>MySQL/bin</code>目录下执行以下命令，会在当前目录导出数据库的sql文件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p 数据库名 &gt; 文件名.sql</span><br><span class="line">输入密码</span><br></pre></td></tr></table></figure><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>顺带把导入sql的方式也一并记录了。</p><h3 id="1、使用Navicate自带的导入功能"><a href="#1、使用Navicate自带的导入功能" class="headerlink" title="1、使用Navicate自带的导入功能"></a>1、使用Navicate自带的导入功能</h3><p>选择`运行SQL文件…</p><p><img src="http://oltremare.cc/2019/12/17/%E8%A7%A3%E5%86%B3MySQL%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%97%B6-xxx-doesn-t-exist%E7%9A%84%E9%97%AE%E9%A2%98/%E5%AF%BC%E5%85%A5SQL%E8%8F%9C%E5%8D%95.png" alt="导入SQL菜单"></p><p>选择对应的SQL文件后，运行，注意取消红框中的钩</p><p><a href="http://oltremare.cc/2019/12/17/%E8%A7%A3%E5%86%B3MySQL%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%97%B6-xxx-doesn-t-exist%E7%9A%84%E9%97%AE%E9%A2%98/%E8%BF%90%E8%A1%8CSQL%E6%96%87%E4%BB%B6.png" target="_blank" rel="noopener"><img src="http://oltremare.cc/2019/12/17/%E8%A7%A3%E5%86%B3MySQL%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%97%B6-xxx-doesn-t-exist%E7%9A%84%E9%97%AE%E9%A2%98/%E8%BF%90%E8%A1%8CSQL%E6%96%87%E4%BB%B6.png" alt="导入SQL界面"></a></p><p><a href="http://oltremare.cc/2019/12/17/%E8%A7%A3%E5%86%B3MySQL%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%97%B6-xxx-doesn-t-exist%E7%9A%84%E9%97%AE%E9%A2%98/%E8%BF%90%E8%A1%8CSQL%E6%96%87%E4%BB%B6.png" target="_blank" rel="noopener">导入SQL界面</a></p><p>接下来就交给Navicat自行处理了。</p><h2 id="2-使用MySQL命令行导入"><a href="#2-使用MySQL命令行导入" class="headerlink" title="2.使用MySQL命令行导入"></a>2.使用MySQL命令行导入</h2><p>在命令行登录至MySQL数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"># 输入密码 密码字符不可见</span><br></pre></td></tr></table></figure><p>查看MySQL的所有数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><p>进入xxx数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use &lt;数据库名&gt;</span><br></pre></td></tr></table></figure><p>运行SQl文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &lt;sql文件名&gt;.sql</span><br></pre></td></tr></table></figure><p>等待执行，完成导入。</p><p>That’s it!</p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
          <category> Mysql基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>美丽的周末</title>
      <link href="2020/01/13/%E7%BE%8E%E4%B8%BD%E7%9A%84%E5%91%A8%E6%9C%AB/"/>
      <url>2020/01/13/%E7%BE%8E%E4%B8%BD%E7%9A%84%E5%91%A8%E6%9C%AB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>2020/1/11日，一个令人开心的周六，我们导师请吃饭，在重庆&gt;芭菲盛宴环球美食重庆解放碑店聚餐，一个团队的老师和师兄师姐，和师妹一起聚在一起聊聊天，吃吃饭，相比平时都是自己一个人宅在公寓里强的是在太多了，特此记录一下美妙的周末。</p><p>其实，很难得在研究生的学习中，遇到这样一为和蔼、大方、爱护学生、有思想、有见解的这样一位老师，因为在大学主动了解学生和学生交流的老师真的不多。在边吃饭的同时，老师给我们讲她以前的奋斗历史，工作经历，生活阅历，人生机遇，励志的师兄师姐案例，和她特别崇拜的老公。老师讲的最多的还是她的老公，在今年经济形势不行的情况下，100多家的通信公司，只剩下不到十家，而且她老公的公司业务还在持续不断的增长，真的很了不起，其实，老师主要是想要告诉我们，要对自己的人生有一个长远的规划，世界变化很快，只有坚持长远的发展，有长远的目标，才能不为世界所淘汰。</p><p>我也不是特别喜欢拍照，只是随手拍了几张照片，没有太刻意的去记录，我比较喜欢吃虾，下面这种图是很大一只的虾，阿根廷红虾，一般的虾熟了才是红的，这种虾比较奇特，生的就是红色的。</p><p><img src="https://s2.ax1x.com/2020/01/13/lTHAEt.jpg" alt></p><p>芭菲盛宴比一般的自助还是要高级一点，我没有拍特别多的美食，其中，第一次吃哈根达斯，这东西太贵了，平时都不舍得，也不会花钱买这个吃。</p><p><img src="https://s2.ax1x.com/2020/01/13/lTHeC8.jpg" alt></p><p>就这么一个球，哈哈</p><p><img src="https://s2.ax1x.com/2020/01/13/lTHngg.jpg" alt></p><p>下午，我们吃完饭，我们师姐提议去打麻将，正好我们老师，师兄师妹都没啥事，我们大家都去了，找了一个沿江休闲的茶楼，那个地方风景真的特别好，在那里玩了一下午，大家都不是太会，我们打一块钱的，特别小，本来就是娱乐。拍了几张照片。</p><p><img src="https://s2.ax1x.com/2020/01/13/lTH0bR.jpg" alt></p><p><img src="https://s2.ax1x.com/2020/01/13/lTHc8O.jpg" alt></p><p>对面那条江 就是长江，坐在外面可以观看到美丽风景。</p><p>总而言之，这个周末玩的很开心，吃的很满意，更多的是记住了老师给我们分享的一些心灵感悟，特别谢谢我们的韦老师。</p>]]></content>
      
      
      <categories>
          
          <category> 生活日记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 旭仔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>String字符串常见的基本操作</title>
      <link href="2019/11/06/String%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
      <url>2019/11/06/String%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="String字符串常见的基本操作"><a href="#String字符串常见的基本操作" class="headerlink" title="String字符串常见的基本操作"></a>String字符串常见的基本操作</h2><p>（1）新建字符串</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line">String str2 = <span class="keyword">new</span> String(<span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;);</span><br><span class="line">String str3 = <span class="string">"abc"</span>;</span><br><span class="line">String str4 = <span class="keyword">new</span> String(<span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">'1'</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;,<span class="number">1</span>,<span class="number">3</span>); <span class="comment">//从索引1开始  往后搞3个元素</span></span><br><span class="line">System.out.println(str);<span class="comment">//abc</span></span><br><span class="line">System.out.println(str2);<span class="comment">//abc</span></span><br><span class="line">System.out.println(str3);<span class="comment">//abc</span></span><br><span class="line">System.out.println(str4);<span class="comment">//abc</span></span><br></pre></td></tr></table></figure><p>（2)获取字符串的内容信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String str5 = <span class="string">"hello everyone, my name is yangxu ,i am chinese"</span>;</span><br><span class="line">System.out.println(<span class="string">"字符串的长度是："</span>+str5.length());<span class="comment">//47</span></span><br><span class="line">System.out.println(<span class="string">"首次出现a的索引是："</span>+str5.indexOf(<span class="string">'a'</span>));<span class="comment">//20</span></span><br><span class="line">System.out.println(<span class="string">"最后一次出现a的索引是："</span>+str5.lastIndexOf(<span class="string">'a'</span>));<span class="comment">//37</span></span><br><span class="line">System.out.println(<span class="string">"索引为2的字符是："</span>+str5.charAt(<span class="number">2</span>));<span class="comment">//l</span></span><br></pre></td></tr></table></figure><p>(3)获取子字符串</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str6 = str5.substring(<span class="number">20</span>); <span class="comment">//返回从索引2开始子字符串</span></span><br><span class="line">System.out.println(str6); <span class="comment">//ame is yangxu ,i am chinese</span></span><br><span class="line">String str7 = str5.substring(<span class="number">2</span>,<span class="number">5</span>); <span class="comment">//返回索引2到索引5的子字符串，包括2不包括5</span></span><br><span class="line">System.out.println(str7); <span class="comment">//llo</span></span><br></pre></td></tr></table></figure><p>(4)去除空格</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str8 = <span class="string">"    java    python   "</span>;</span><br><span class="line">System.out.println(<span class="string">"去掉空格后的子字符串："</span>+str8.trim());<span class="comment">//java    python</span></span><br><span class="line">System.out.println(<span class="string">"去掉空格后的子字符串的长度是："</span>+str8.trim().length()); <span class="comment">//14  只去掉首尾空格</span></span><br></pre></td></tr></table></figure><p>(5)字符串替换</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str9 = <span class="string">"address"</span>;</span><br><span class="line">System.out.println(str9.replace(<span class="string">"a"</span>,<span class="string">"A"</span>));<span class="comment">//Address</span></span><br><span class="line">System.out.println(str9);<span class="comment">//address</span></span><br></pre></td></tr></table></figure><p>(6)判断字符串的开始于结尾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str10 = <span class="string">"yangxunihao"</span>;</span><br><span class="line">System.out.println(str10.startsWith(<span class="string">"yang"</span>));<span class="comment">//true</span></span><br><span class="line">System.out.println(str10.endsWith(<span class="string">"java"</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>(7)判断字符串是否相等</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">String strs1=<span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line">String strs2 = <span class="keyword">new</span> String(<span class="string">"ABC"</span>);</span><br><span class="line">String strs3 = <span class="string">"abc"</span>;</span><br><span class="line">String strs4 = <span class="keyword">new</span> String(<span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;);</span><br><span class="line">String strs5 = <span class="string">"ab"</span>+<span class="string">"c"</span>;</span><br><span class="line"></span><br><span class="line">System.out.println(strs1 == strs2); <span class="comment">//false</span></span><br><span class="line">System.out.println(strs1.equals(strs2));<span class="comment">//false</span></span><br><span class="line">System.out.println(strs1.equalsIgnoreCase(str2)); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">System.out.println(strs1==strs3); <span class="comment">//false</span></span><br><span class="line">System.out.println(strs1.equals(strs3)); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">System.out.println(strs1==strs4); <span class="comment">//false</span></span><br><span class="line">System.out.println(strs1.equals(strs4)); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(strs3==strs4); <span class="comment">//false</span></span><br><span class="line">System.out.println(strs3.equals(strs4));<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">System.out.println(strs3==strs5); <span class="comment">//true</span></span><br><span class="line">System.out.println(strs3.equals(strs5)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>(8)字母大小写转换</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(strs1.toUpperCase());<span class="comment">//ABC</span></span><br><span class="line">System.out.println(strs1.toLowerCase());<span class="comment">//abc</span></span><br></pre></td></tr></table></figure><p>(9)字符串分割</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String strs6 = <span class="string">"192.168.0.1"</span>;</span><br><span class="line">String []arr = strs6.split(<span class="string">"\\."</span>);</span><br><span class="line">System.out.println(Arrays.toString(arr));<span class="comment">//[192, 168, 0, 1]</span></span><br></pre></td></tr></table></figure><p>(10)包含子串问题</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String sqls = <span class="string">"yangxu"</span>;</span><br><span class="line">System.out.println(sqls.indexOf(<span class="string">"xu"</span>));<span class="comment">//4  xu第一次出现的索引是4</span></span><br></pre></td></tr></table></figure><p>记得双击，么么哒！</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> java基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> String </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java常見的类型转换</title>
      <link href="2019/11/05/java%E5%B8%B8%E8%A6%8B%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
      <url>2019/11/05/java%E5%B8%B8%E8%A6%8B%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="java常见的类型转换总结"><a href="#java常见的类型转换总结" class="headerlink" title="java常见的类型转换总结"></a>java常见的类型转换总结</h2><p>(1) String -&gt; int </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String str1 = <span class="string">"123"</span>;</span><br><span class="line"><span class="keyword">int</span> value = Integer.valueOf(str1);</span><br><span class="line"></span><br><span class="line">String str1 = <span class="string">"123"</span>;</span><br><span class="line"><span class="keyword">int</span> value2 = Integer.parseInt(str1);</span><br></pre></td></tr></table></figure><p>( 2) int -&gt; String</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> value = <span class="number">123</span>;</span><br><span class="line">String str1 = String.valueOf(value);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> value = <span class="number">123</span>;</span><br><span class="line">String str2 =Integer.toString(value);</span><br></pre></td></tr></table></figure><p>(3) Integer -&gt; String</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一:Integer类的静态方法toString()</span></span><br><span class="line">Integer a = <span class="number">2</span>;</span><br><span class="line">String str = Integer.toString(a)</span><br><span class="line">    </span><br><span class="line"><span class="comment">//方法二:Integer类的成员方法toString()</span></span><br><span class="line">Integer a = <span class="number">2</span>;</span><br><span class="line">String str = a.toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法三:String类的静态方法valueOf()</span></span><br><span class="line">Integer a = <span class="number">2</span>;</span><br><span class="line">String str = String.valueOf(a);</span><br></pre></td></tr></table></figure><p>(4) String -&gt; Integer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"123"</span>;</span><br><span class="line">Integer value = Integer.valueOf(str);</span><br><span class="line">Integer value2 = Integer.parseInt(str);</span><br></pre></td></tr></table></figure><p>(5) int -&gt; Integer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">123</span>;</span><br><span class="line">Integer value = <span class="keyword">new</span> Integer(a);</span><br><span class="line">Integer value2 = Integer.valueOf(a);</span><br></pre></td></tr></table></figure><p>(6) Integer -&gt; int</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">int</span> value = a.intValue();</span><br></pre></td></tr></table></figure><p>(7) String -&gt; float</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"123"</span>;</span><br><span class="line"><span class="keyword">float</span> value = Float.valueOf(str);</span><br><span class="line"><span class="keyword">float</span> value2 = Float.parseFloat(str);</span><br></pre></td></tr></table></figure><p>(8) float -&gt; String</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> a = <span class="number">123.0f</span>;</span><br><span class="line">String str = String.valueOf(a);</span><br><span class="line">String str2 = Float.toString(a);</span><br></pre></td></tr></table></figure><p>(9) Float -&gt; String</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Float a = <span class="number">123f</span>;</span><br><span class="line">String str1 = a.toString();</span><br><span class="line">String str2 = String.valueOf(a);</span><br><span class="line">String str3 = a.toString();</span><br></pre></td></tr></table></figure><p>(10) String -&gt; Float</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"123"</span>;</span><br><span class="line">Float value = Float.valueOf(str);</span><br><span class="line">Float value2 = Float.parseFloat(str);</span><br></pre></td></tr></table></figure><p>(11) String -&gt;double  String -&gt;long 同理  其他类型转换同理</p><p>（12）String -&gt; char</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"yangxu"</span>;</span><br><span class="line"><span class="keyword">char</span> c = str.charAt(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>(13)  char -&gt; String</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> c = <span class="string">'c'</span>;</span><br><span class="line">String str = String.valueOf(c);</span><br><span class="line">String str2 = Character.toString(c);</span><br><span class="line">String str3 = <span class="keyword">new</span> Character(c).toString();</span><br><span class="line">String str4 = <span class="keyword">new</span> String(<span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">'c'</span>&#125;);</span><br></pre></td></tr></table></figure><p>(14) char[ ] -&gt; String</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> [] c = <span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;;</span><br><span class="line">String str =String.copyValueOf(c);</span><br></pre></td></tr></table></figure><p>(15) String -&gt; char[ ]</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"yangxu"</span>;</span><br><span class="line"><span class="keyword">char</span>[] arr= str.toCharArray();</span><br></pre></td></tr></table></figure><p>(16) Interger[ ] -&gt; int[ ]</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer[] arr = <span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">76</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arrs = Arrays.stream(arr).mapToInt(Integer::valueOf).toArray();</span><br></pre></td></tr></table></figure><p>(17) int[ ] -&gt; Integer[ ]</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] a=&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line">Integer[] arr= IntStream.of(a).boxed().collect(Collectors.toList()).toArray(<span class="keyword">new</span> Integer[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">Integer[] integers = Arrays.stream(a).boxed().toArray(Integer[]::<span class="keyword">new</span>);</span><br></pre></td></tr></table></figure><p>(18) List<integer> -&gt; int[ ]</integer></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt; Integer &gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">list.add(<span class="number">165</span>);</span><br><span class="line">list.add(<span class="number">25</span>);</span><br><span class="line">list.add(<span class="number">24</span>);</span><br><span class="line">list.add(<span class="number">23</span>);</span><br><span class="line"><span class="keyword">int</span>[] int1 = list.stream().mapToInt(Integer::valueOf).toArray();</span><br><span class="line"><span class="keyword">int</span>[] int2 = list.stream().mapToInt(Integer::intValue).toArray();</span><br></pre></td></tr></table></figure><p>(19) int[ ] -&gt; List<integer></integer></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">45</span>&#125;;</span><br><span class="line">List list = Arrays.stream(arr).boxed().collect(Collectors.toList());</span><br></pre></td></tr></table></figure><p>(20) Integer[ ] -&gt; List<integer></integer></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer[] arr= &#123;<span class="number">23</span>,<span class="number">12</span>,<span class="number">14</span>&#125;;</span><br><span class="line">List&lt;Integer&gt; list=Arrays.asList(arr);</span><br><span class="line">List&lt;Integer&gt; list1 = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(arr));</span><br></pre></td></tr></table></figure><p>若有补充，将持续更新，记得双击，么么哒！</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> java基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+next主题美化四</title>
      <link href="2019/09/24/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E5%9B%9B/"/>
      <url>2019/09/24/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E5%9B%9B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于看见别人的博客里面都有在线留言，在线聊天功能，感觉挺有趣的，因此我也想给我的博客配置这个功能，感觉还十分的有趣，哈哈，废话不多说，开搞。</p><h2 id="步骤详解"><a href="#步骤详解" class="headerlink" title="步骤详解"></a>步骤详解</h2><p>（1）在DaoCloud网站<a href="https://dashboard.daocloud.io/" target="_blank" rel="noopener">https://dashboard.daocloud.io/</a> 注册账号，并登录</p><p>（2）点击左边栏的 应用设置——&gt;安装到网站  ，可以查看自己的app_id</p><p> (3)修改<code>/themes/next/layout/_partials/head.swig</code>文件，添加内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.daovoice %&#125;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  (function(i,s,o,g,r,a,m)&#123;i[&quot;DaoVoiceObject&quot;]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset=&quot;utf-8&quot;;m.parentNode.insertBefore(a,m)&#125;)(window,document,&quot;script&quot;,(&apos;https:&apos; == document.location.protocol ? &apos;https:&apos; : &apos;http:&apos;) + &quot;//widget.daovoice.io/widget/0f81ff2f.js&quot;,&quot;daovoice&quot;)</span><br><span class="line">  daovoice(&apos;init&apos;, &#123;</span><br><span class="line">      app_id: &quot;&#123;&#123;theme.daovoice_app_id&#125;&#125;&quot;</span><br><span class="line">    &#125;);</span><br><span class="line">  daovoice(&apos;update&apos;);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>(4)修改主题的配置文件，添加以下代码：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Online contact</span></span><br><span class="line"><span class="attr">daovoice:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">daovoice_app_id:</span> <span class="number">0</span><span class="string">d207805</span></span><br></pre></td></tr></table></figure><p>(5) 到这就已经完成了，hexo s 运行自己的博客，效果如下：</p><p><img src="https://s2.ax1x.com/2019/09/24/uk4imq.png" alt></p><h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>有问题欢迎留言哦，记得双击，么么哒！</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> Next主题美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>&#39;mybatis框架一&#39;</title>
      <link href="2019/09/24/mybatis%E6%A1%86%E6%9E%B6%E4%B8%80/"/>
      <url>2019/09/24/mybatis%E6%A1%86%E6%9E%B6%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>现在是2019年9月23号，晚上23:40，我目前是研二上学期，秋季上学期刚开学，我对自己职业规划是毕业后从事java后端开发，对于很多企业都要求后端开发者具备mybatis框架知识体系，为了毕业后能够找到一份令自己满意的工作，我开始学习了mybatis框架，以下是我学习mybatis框架的一些浅薄的认知，<strong>适合初学者阅读</strong></p><h2 id="MyBatis框架的介绍"><a href="#MyBatis框架的介绍" class="headerlink" title="MyBatis框架的介绍"></a>MyBatis框架的介绍</h2><h3 id="（1）MyBatis框架是什么？"><a href="#（1）MyBatis框架是什么？" class="headerlink" title="（1）MyBatis框架是什么？"></a>（1）MyBatis框架是什么？</h3><p>MyBatis 是一款优秀的持久层框架，它支持定制化 SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。</p><h3 id="（2）MyBatis为什么会出现，并且他解决的什么问题？"><a href="#（2）MyBatis为什么会出现，并且他解决的什么问题？" class="headerlink" title="（2）MyBatis为什么会出现，并且他解决的什么问题？"></a>（2）MyBatis为什么会出现，并且他解决的什么问题？</h3><p>​    数据库链接创建、释放频繁造成系统资源浪费从而影响系统性能，如果使用数据库链接池可解决此问题。</p><p>解决：在SqlMapConfig.xml中配置数据链接池，使用连接池管理数据库链接。</p><pre><code>Sql语句写在代码中造成代码不易维护，实际应用sql变化的可能较大，sql变动需要改变java代码。</code></pre><p>解决：将Sql语句配置在XXXXmapper.xml文件中与java代码分离。</p><p>​    向sql语句传参数麻烦，因为sql语句的where条件不一定，可能多也可能少，占位符需要和参数一一对应。</p><p>解决：Mybatis自动将java对象映射至sql语句，通过statement中的parameterType定义输入参数的类型。</p><p>​    对结果集解析麻烦，sql变化导致解析代码变化，且解析前需要遍历，如果能将数据库记录封装成pojo对象解析比较方便。</p><p>解决：Mybatis自动将sql执行结果映射至java对象，通过statement中的resultType定义输出结果的类型。</p><h3 id="（3）同类的技术有哪些？"><a href="#（3）同类的技术有哪些？" class="headerlink" title="（3）同类的技术有哪些？"></a>（3）同类的技术有哪些？</h3><p>最原始的JDBC，Hibernate框架</p><h1 id="MyBatis框架的入门案例"><a href="#MyBatis框架的入门案例" class="headerlink" title="MyBatis框架的入门案例"></a>MyBatis框架的入门案例</h1><h3 id="技术点"><a href="#技术点" class="headerlink" title="技术点"></a>技术点</h3><p>mybatis框架 + 开发工具IDEA</p><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>（1）新建一个基于maven管理的java项目，在项目的配置文件（pom.xml文件）下导入所需的依赖(以下是我的配置，具体版本可以根据实际情况而定，自行选择)：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>（2）在资源目录resources下新建一个SqlMapConfig.xml文件，导入约束，然后配置一些数据库相关的信息（具体数据库的配置信息根据自己的情况做相应修改即可）：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">​```xml</span><br><span class="line"><span class="comment">&lt;!--约束--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置mysql 的环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置事务类型--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置数据源，也称连接池--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--配置连接数据库的4个基本信息--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span><span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/eesy"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"yx1994"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定映射配置文件的位置，映射配置文件指的是每个dao独立的配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;mapper resource="com/itheima/dao/IUserDao.xml"/&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h2><p>（1）搭建好开发环境之后，我们可以新建我们的实体类和dao接口：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//我的实体类：</span></span><br><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Date birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", username='"</span> + username + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", birthday="</span> + birthday +</span><br><span class="line">                <span class="string">", sex='"</span> + sex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", address='"</span> + address + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 我的dao接口 即用户的持久成接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    查询所有操作 ,此处先只演示一个查询所用用户的一个方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）完成第一步之后，我们需要在resources目录下，新建一个与dao接口相同的路径的xml配置文件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--我的新建文件 IUserDao.xml文件--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--第一步引入映射的约束--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置查询的sql--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.dao.IUserDao"</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">id属性：就是dao接口的方法名称 </span></span><br><span class="line"><span class="comment">resultType：就是执行sql对应实体的全类名</span></span><br><span class="line"><span class="comment">在select标签里面写sql语句</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>（3）需要在SqlMapConfig.xml文件里面配置一下我们的映射文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/itheima/dao/IUserDao.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(4)我们可以写一个测试类来测试一下，我们写的能否从数据库取到数据，并且封装到实体中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1.读取配置文件</span></span><br><span class="line">        InputStream in = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">        <span class="comment">//2.创建SqlSessionFactory工厂</span></span><br><span class="line">        SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">        SqlSessionFactory factory = builder.build(in);</span><br><span class="line">        <span class="comment">//3.使用工厂生产SqlSession对象</span></span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        <span class="comment">//4.使用SqlSession 创建Dao接口的代理对象 // 根据dao接口的字节码创建dao的代理对象</span></span><br><span class="line">        IUserDao userDao = session.getMapper(IUserDao.class);</span><br><span class="line">        <span class="comment">//5.使用代理对象执行方法</span></span><br><span class="line">        List&lt;User&gt; users = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user:users)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//6.释放资源</span></span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>(5)执行结果：</p><p><img src="https://s2.ax1x.com/2019/09/24/uFwngg.png" alt></p><p>以上我们已经完成了mybatis入门的第一个案例，这其中还有很多对数据库的增删改查操作，我们都可以用配置文件的方式，完成对数据的访问。</p>]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
          <category> mybatis基础入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+next主题美化三</title>
      <link href="2019/09/21/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%B8%89/"/>
      <url>2019/09/21/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="给hexo博客next主题添加背景音乐"><a href="#给hexo博客next主题添加背景音乐" class="headerlink" title="给hexo博客next主题添加背景音乐"></a>给hexo博客next主题添加背景音乐</h2><p>1.生成外链播放器html代码</p><p><img src="https://s2.ax1x.com/2019/09/20/nXqRo9.png" alt></p><p><img src="https://s2.ax1x.com/2019/09/20/nXLiwQ.png" alt></p><p>2.将赋值的代码拷贝到<code>themes/next/layout/_macro/sidebar.swig</code> 文件下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--音乐播放器--&gt;</span><br><span class="line">  &lt;div id=<span class="string">"music163player"</span>&gt;</span><br><span class="line">&#123;%<span class="keyword">if</span> theme.background_music %&#125;</span><br><span class="line">&lt;iframe frameborder=<span class="string">"no"</span> border=<span class="string">"0"</span> marginwidth=<span class="string">"0"</span> marginheight=<span class="string">"0"</span> width=<span class="number">330</span> height=<span class="number">86</span> src=<span class="string">"//music.163.com/outchain/player?type=2&amp;id=483937795&amp;auto=1&amp;height=66"</span>&gt;&lt;/iframe&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure><p>3.在主题的配置文件的末尾添加以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//后面拷贝的路径为第2步拷贝的src后面的代码</span></span><br><span class="line">background_music:</span><br><span class="line"><span class="comment">//music.163.com/outchain/playertype=0&amp;id=2992021935&amp;auto=1&amp;height=90</span></span><br></pre></td></tr></table></figure><p>4.最终效果</p><p><img src="https://s2.ax1x.com/2019/09/20/nXOvKf.png" alt></p><h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><p>1.购买域名。</p><p>2.进入域名解析列表并对购买的域名进行解析</p><p><img src="https://upload-images.jianshu.io/upload_images/4355294-ac6c7fcbc3d0a41c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/766/format/webp" alt></p><p><img src="https://s2.ax1x.com/2019/09/20/njYqBR.png" alt></p><p>其中，着两条记录要自己添加</p><p>win+R快捷键打开“运行”窗口，输入cmd运行<strong>命令行控制台</strong>输入命令：ping yourusername.github.io 拿到你的github的ip地址</p><p><img src="https://s2.ax1x.com/2019/09/20/njtqxg.png" alt></p><p>添加详细细节：</p><p><img src="https://s2.ax1x.com/2019/09/20/njUnmj.jpg" alt></p><p><img src="https://s2.ax1x.com/2019/09/20/njUwA1.png" alt></p><p>3.在你的博客的主目录下的public文件夹下建一个名称为CNAME的文件，记住，不要后缀名，在文件里面填写你的博客的地址， yourusername.github.io</p><h2 id="添加评论系统"><a href="#添加评论系统" class="headerlink" title="添加评论系统"></a>添加评论系统</h2><p>此处介绍的评论系统是Valine ，Valine 是基于 LeanCloud 作为数据存储的，所以需要注册一个账号。注册完成后，进入控制台：</p><p>​    1.创建一个引用，输入应用名称，选择开发版，点击创建</p><p>​    2.创建完成后，打开应用，左边的存储，查看 数据下面有没有 Counter 和 Comment 两个 Classes，如果没有，点击创建 Class，选择 无限制即可。创建完成后，如下：</p><p><img src="https://s2.ax1x.com/2019/09/20/nv9nM9.png" alt></p><h3 id="3-配置Hexo中NexT主题"><a href="#3-配置Hexo中NexT主题" class="headerlink" title="3.配置Hexo中NexT主题"></a>3.配置Hexo中NexT主题</h3><p> 路径： themes/next/_config.yml 文件。到这里 <a href="https://www.jsdelivr.com/package/npm/valine" target="_blank" rel="noopener">https://www.jsdelivr.com/package/npm/valine</a> 这个地址选择最新版本的Valine，然后获取cdn地址，修改到 主题配置文件 _config.yml 即可。</p><p><img src="https://s2.ax1x.com/2019/09/20/nv9bQJ.png" alt></p><p>主题配置文件配置参数如下：</p><p><img src="https://s2.ax1x.com/2019/09/20/nvCNfU.png" alt></p><p>最终效果哈哈，请参考：</p><p><img src="https://s2.ax1x.com/2019/09/20/nvCjXj.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> Next主题美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+next主题美化一</title>
      <link href="2019/09/17/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%B8%80/"/>
      <url>2019/09/17/hexo+next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>听B站大神推荐，作为程序员，必须拥有属于自己的博客，我也觉得很有必要，所以在网上学查了一些资料，自己搭了一个自己的博客，感觉博客还挺有趣的，不断能够锻炼自己的写作能力，而且也能分享自己踩过的一些坑，记录自己的生活，记录自己对某些技术的一些理解，希望自己能够一直坚持下来，加油！</p><h2 id="技术点介绍"><a href="#技术点介绍" class="headerlink" title="技术点介绍"></a>技术点介绍</h2><p>Hexo框架+Markdown标记语言。Hexo是一个快速，简洁并且高效的博客框架，Hexo使用Markdown（或者其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态的网页。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>安装Hexo框架之前，我们需要安装Node.js(版本不低于8.6)和Git，我们可以在<a href="http://nodejs.cn/download/" target="_blank" rel="noopener">Node.js的官网</a>下载安装Node.js，在<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git的官网</a>下载安装git ，安装好git和Node.js 后，我们可以检查是否安装好了git和Node.js</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Windows+R  输入cmd 打开命令行</span></span><br><span class="line"><span class="comment">//查看node 的版本</span></span><br><span class="line">输入： node -v</span><br><span class="line"><span class="comment">//查看 git 的本版</span></span><br><span class="line">输入： git --version</span><br></pre></td></tr></table></figure><p>效果如下：</p><p><img src="https://s2.ax1x.com/2019/09/18/n7eBFO.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装hexo框架 很简单 一步搞定</span></span><br><span class="line">npm install -g hexo-cli <span class="comment">//安装hexo博客框架， -g表示全局安装</span></span><br><span class="line">mkdir myblog <span class="comment">// 新建一个myblog文件夹  名字随便取</span></span><br><span class="line">cd myblog <span class="comment">// 进入到myblog文件夹</span></span><br><span class="line">hexo init <span class="comment">//初始化一篇博客</span></span><br><span class="line">hexo <span class="keyword">new</span> <span class="string">'新建的博客名'</span>  <span class="comment">// 新建一个博客</span></span><br><span class="line">hexo s  <span class="comment">// 启动博客</span></span><br><span class="line">hexo d <span class="comment">// 部署博客</span></span><br><span class="line">hexo clean  <span class="comment">// 清除缓存</span></span><br><span class="line">hexo  g  <span class="comment">//重新生成静态文件</span></span><br></pre></td></tr></table></figure><p>这里只是介绍简单的hexo命令，更详细的的教程我们可以查看<a href="https://hexo.io/zh-cn/docs/commands" target="_blank" rel="noopener">hexo的官网文档</a>,安装好后我们可以新建一篇博客，然后用 heox s 命令启动博客， 后期我们想要给自己的博客换主题的话，我们可以参这<a href="[https://zyh1020.github.io/2019/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E7%9A%84%E6%9C%80%E6%96%B0%E4%BC%98%E5%8C%96-3/](https://zyh1020.github.io/2019/hexo的next主题的最新优化-3/)">篇博客</a>，hexo+NexT主题，如何搭建一个炫酷的博客.</p><h2 id="踩过的坑"><a href="#踩过的坑" class="headerlink" title="踩过的坑"></a>踩过的坑</h2><p>站点的配置文件 _config.yml ,这是我遇到了一个坑。</p><p><img src="https://s2.ax1x.com/2019/09/18/n7GtZ4.png" alt></p><h2 id="心得体会"><a href="#心得体会" class="headerlink" title="心得体会"></a>心得体会</h2><p>第一次写博客，写的很垃圾，写的东西很浅显，希望日后不断的学习，不断的努力，争取写出很好的博客，更有水平的博客，加油。</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
          <category> Next主题美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
